{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSnapshotByObject = getSnapshotByObject;\nexports.firestoreRef = firestoreRef;\nexports.getQueryName = getQueryName;\nexports.getBaseQueryName = getBaseQueryName;\nexports.listenerExists = listenerExists;\nexports.attachListener = attachListener;\nexports.detachListener = detachListener;\nexports.queryStrToObj = queryStrToObj;\nexports.getQueryConfig = getQueryConfig;\nexports.getQueryConfigs = getQueryConfigs;\nexports.orderedFromSnap = orderedFromSnap;\nexports.dataByIdSnapshot = dataByIdSnapshot;\nexports.getPopulateChild = getPopulateChild;\nexports.populateList = populateList;\nexports.promisesForPopulate = promisesForPopulate;\nexports.dispatchListenerResponse = dispatchListenerResponse;\nexports.getPopulateActions = getPopulateActions;\nexports.snapshotCache = void 0;\n\nvar _cloneDeep2 = _interopRequireDefault(require(\"lodash/cloneDeep\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _map2 = _interopRequireDefault(require(\"lodash/map\"));\n\nvar _has2 = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _forEach2 = _interopRequireDefault(require(\"lodash/forEach\"));\n\nvar _trim2 = _interopRequireDefault(require(\"lodash/trim\"));\n\nvar _isEmpty2 = _interopRequireDefault(require(\"lodash/isEmpty\"));\n\nvar _isNumber2 = _interopRequireDefault(require(\"lodash/isNumber\"));\n\nvar _isObject2 = _interopRequireDefault(require(\"lodash/isObject\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toArray(arr) {\n  return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar snapshotCache = new WeakMap();\nexports.snapshotCache = snapshotCache;\n\nfunction getSnapshotByObject(obj) {\n  return snapshotCache.get(obj);\n}\n\nfunction addWhereToRef(ref, where) {\n  if (!Array.isArray(where)) {\n    throw new Error('where parameter must be an array.');\n  }\n\n  if (Array.isArray(where[0])) {\n    return where.reduce(function (acc, whereArgs) {\n      return addWhereToRef(acc, whereArgs);\n    }, ref);\n  }\n\n  return ref.where.apply(ref, _toConsumableArray(where));\n}\n\nfunction addOrderByToRef(ref, orderBy) {\n  if (!Array.isArray(orderBy) && !(typeof orderBy === 'string' || orderBy instanceof String)) {\n    throw new Error('orderBy parameter must be an array or string.');\n  }\n\n  if (typeof orderBy === 'string' || orderBy instanceof String) {\n    return ref.orderBy(orderBy);\n  }\n\n  if (typeof orderBy[0] === 'string' || orderBy[0] instanceof String) {\n    return ref.orderBy.apply(ref, _toConsumableArray(orderBy));\n  }\n\n  return orderBy.reduce(function (acc, orderByArgs) {\n    return addOrderByToRef(acc, orderByArgs);\n  }, ref);\n}\n\nfunction arrayify(cursor) {\n  return [].concat(cursor);\n}\n\nfunction handleSubcollections(ref, subcollectionList) {\n  if (Array.isArray(subcollectionList)) {\n    subcollectionList.forEach(function (subcollection) {\n      if (subcollection.collection) {\n        if (typeof ref.collection !== 'function') {\n          throw new Error(\"Collection can only be run on a document. Check that query config for subcollection: \\\"\".concat(subcollection.collection, \"\\\" contains a doc parameter.\"));\n        }\n\n        ref = ref.collection(subcollection.collection);\n      }\n\n      if (subcollection.doc) ref = ref.doc(subcollection.doc);\n      if (subcollection.where) ref = addWhereToRef(ref, subcollection.where);\n\n      if (subcollection.orderBy) {\n        ref = addOrderByToRef(ref, subcollection.orderBy);\n      }\n\n      if (subcollection.limit) ref = ref.limit(subcollection.limit);\n\n      if (subcollection.startAt) {\n        var _ref;\n\n        ref = (_ref = ref).startAt.apply(_ref, _toConsumableArray(arrayify(subcollection.startAt)));\n      }\n\n      if (subcollection.startAfter) {\n        var _ref2;\n\n        ref = (_ref2 = ref).startAfter.apply(_ref2, _toConsumableArray(arrayify(subcollection.startAfter)));\n      }\n\n      if (subcollection.endAt) {\n        var _ref3;\n\n        ref = (_ref3 = ref).endAt.apply(_ref3, _toConsumableArray(arrayify(subcollection.endAt)));\n      }\n\n      if (subcollection.endBefore) {\n        var _ref4;\n\n        ref = (_ref4 = ref).endBefore.apply(_ref4, _toConsumableArray(arrayify(subcollection.endBefore)));\n      }\n\n      ref = handleSubcollections(ref, subcollection.subcollections);\n    });\n  }\n\n  return ref;\n}\n\nfunction firestoreRef(firebase, meta) {\n  var _ref5, _ref6, _ref7, _ref8;\n\n  if (!firebase.firestore) {\n    throw new Error('Firestore must be required and initalized.');\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      orderBy = meta.orderBy,\n      limit = meta.limit,\n      startAt = meta.startAt,\n      startAfter = meta.startAfter,\n      endAt = meta.endAt,\n      endBefore = meta.endBefore;\n  var ref = firebase.firestore();\n\n  if (collection && collectionGroup) {\n    throw new Error('Reference cannot contain both Collection and CollectionGroup.');\n  }\n\n  if (collection) ref = ref.collection(collection);\n  if (collectionGroup) ref = ref.collectionGroup(collectionGroup);\n  if (doc) ref = ref.doc(doc);\n  ref = handleSubcollections(ref, subcollections);\n  if (where) ref = addWhereToRef(ref, where);\n  if (orderBy) ref = addOrderByToRef(ref, orderBy);\n  if (limit) ref = ref.limit(limit);\n  if (startAt) ref = (_ref5 = ref).startAt.apply(_ref5, _toConsumableArray(arrayify(startAt)));\n  if (startAfter) ref = (_ref6 = ref).startAfter.apply(_ref6, _toConsumableArray(arrayify(startAfter)));\n  if (endAt) ref = (_ref7 = ref).endAt.apply(_ref7, _toConsumableArray(arrayify(endAt)));\n  if (endBefore) ref = (_ref8 = ref).endBefore.apply(_ref8, _toConsumableArray(arrayify(endBefore)));\n  return ref;\n}\n\nfunction arrayToStr(key, value) {\n  if (typeof value === 'string' || value instanceof String || (0, _isNumber2.default)(value)) {\n    return \"\".concat(key, \"=\").concat(value);\n  }\n\n  if (typeof value[0] === 'string' || value[0] instanceof String) {\n    return \"\".concat(key, \"=\").concat(value.join(':'));\n  }\n\n  if (value && typeof value.toString === 'function') {\n    return \"\".concat(key, \"=\").concat(value.toString());\n  }\n\n  return value.map(function (val) {\n    return arrayToStr(key, val);\n  });\n}\n\nfunction pickQueryParams(obj) {\n  return ['where', 'orderBy', 'limit', 'startAfter', 'startAt', 'endAt', 'endBefore'].reduce(function (acc, key) {\n    return obj[key] ? _objectSpread({}, acc, _defineProperty({}, key, obj[key])) : acc;\n  }, {});\n}\n\nfunction serialize(queryParams) {\n  return Object.keys(queryParams).filter(function (key) {\n    return queryParams[key] !== undefined;\n  }).map(function (key) {\n    return arrayToStr(key, queryParams[key]);\n  }).join('&');\n}\n\nfunction getQueryName(meta) {\n  if (typeof meta === 'string' || meta instanceof String) {\n    return meta;\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      storeAs = meta.storeAs,\n      remainingMeta = _objectWithoutProperties(meta, [\"collection\", \"collectionGroup\", \"doc\", \"subcollections\", \"storeAs\"]);\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to build query name');\n  }\n\n  if (storeAs) {\n    return storeAs;\n  }\n\n  var basePath = collection || collectionGroup;\n\n  if (doc) {\n    basePath = basePath.concat(\"/\".concat(doc));\n  }\n\n  if (collection && subcollections) {\n    console.error('Queries with subcollections must use \"storeAs\" to prevent invalid store updates. This closley matches the upcoming major release (v1), which stores subcollections at the top level by default.');\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = \"\".concat(basePath, \"/\").concat(mappedCollections.join('/'));\n  }\n\n  var queryParams = pickQueryParams(remainingMeta);\n\n  if (!(0, _isEmpty2.default)(queryParams)) {\n    if (queryParams.where && !Array.isArray(queryParams.where)) {\n      throw new Error('where parameter must be an array.');\n    }\n\n    basePath = basePath.concat('?', serialize(queryParams));\n  }\n\n  return basePath;\n}\n\nfunction getBaseQueryName(meta) {\n  if (typeof meta === 'string' || meta instanceof String) {\n    return meta;\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      subcollections = meta.subcollections,\n      remainingMeta = _objectWithoutProperties(meta, [\"collection\", \"collectionGroup\", \"subcollections\"]);\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to build query name');\n  }\n\n  var basePath = collection || collectionGroup;\n\n  if (collection && subcollections) {\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = \"\".concat(basePath, \"/\").concat(mappedCollections.join('/'));\n  }\n\n  var queryParams = pickQueryParams(remainingMeta);\n\n  if (!(0, _isEmpty2.default)(queryParams)) {\n    if (queryParams.where && !Array.isArray(queryParams.where)) {\n      throw new Error('where parameter must be an array.');\n    }\n\n    basePath = basePath.concat('?', serialize(queryParams));\n  }\n\n  return basePath;\n}\n\nfunction confirmMetaAndConfig(firebase, meta) {\n  if (!meta) {\n    throw new Error('Meta data is required to attach listener.');\n  }\n\n  if (!firebase || !firebase._ || !firebase._.listeners) {\n    throw new Error('Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store');\n  }\n}\n\nfunction listenerExists(firebase, meta) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n  return !!firebase._.listeners[name];\n}\n\nfunction attachListener(firebase, dispatch, meta, unsubscribe) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n\n  if (!firebase._.listeners[name]) {\n    firebase._.listeners[name] = unsubscribe;\n  }\n\n  dispatch({\n    type: _constants.actionTypes.SET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n  return firebase._.listeners;\n}\n\nfunction detachListener(firebase, dispatch, meta) {\n  var name = getQueryName(meta);\n\n  if (firebase._.listeners[name]) {\n    firebase._.listeners[name]();\n\n    delete firebase._.listeners[name];\n  }\n\n  dispatch({\n    type: _constants.actionTypes.UNSET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n}\n\nfunction queryStrToObj(queryPathStr, parsedPath) {\n  var pathArr = parsedPath || (0, _trim2.default)(queryPathStr, ['/']).split('/');\n\n  var _pathArr = _toArray(pathArr),\n      collection = _pathArr[0],\n      doc = _pathArr[1],\n      subcollections = _pathArr.slice(2);\n\n  var queryObj = {};\n  if (collection) queryObj.collection = collection;\n  if (doc) queryObj.doc = doc;\n\n  if (subcollections.length) {\n    queryObj.subcollections = [queryStrToObj('', subcollections)];\n  }\n\n  return queryObj;\n}\n\nfunction getQueryConfig(query) {\n  if (typeof query === 'string' || query instanceof String) {\n    return queryStrToObj(query);\n  }\n\n  if ((0, _isObject2.default)(query)) {\n    if (!query.collection && !query.collectionGroup && !query.doc) {\n      throw new Error('Collection, Collection Group and/or Doc are required parameters within query definition object.');\n    }\n\n    return query;\n  }\n\n  throw new Error('Invalid Path Definition: Only Strings and Objects are accepted.');\n}\n\nfunction getQueryConfigs(queries) {\n  if (Array.isArray(queries)) {\n    return queries.map(getQueryConfig);\n  }\n\n  if (typeof queries === 'string' || queries instanceof String) {\n    return queryStrToObj(queries);\n  }\n\n  if ((0, _isObject2.default)(queries)) {\n    return [getQueryConfig(queries)];\n  }\n\n  throw new Error('Querie(s) must be an Array or a string.');\n}\n\nfunction orderedFromSnap(snap) {\n  var ordered = [];\n\n  if (snap.data && snap.exists) {\n    var obj = (0, _isObject2.default)(snap.data()) ? _objectSpread({\n      id: snap.id\n    }, snap.data() || snap.data) : {\n      id: snap.id,\n      data: snap.data()\n    };\n    snapshotCache.set(obj, snap);\n    ordered.push(obj);\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var obj = (0, _isObject2.default)(doc.data()) ? _objectSpread({\n        id: doc.id\n      }, doc.data() || doc.data) : {\n        id: doc.id,\n        data: doc.data()\n      };\n      snapshotCache.set(obj, doc);\n      ordered.push(obj);\n    });\n  }\n\n  snapshotCache.set(ordered, snap);\n  return ordered;\n}\n\nfunction dataByIdSnapshot(snap) {\n  var data = {};\n\n  if (snap.data) {\n    var snapData = snap.exists ? snap.data() : null;\n\n    if (snapData) {\n      snapshotCache.set(snapData, snap);\n    }\n\n    data[snap.id] = snapData;\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var snapData = doc.data() || doc;\n      snapshotCache.set(snapData, doc);\n      data[doc.id] = snapData;\n    });\n  }\n\n  if (!!data && Object.keys(data).length) {\n    snapshotCache.set(data, snap);\n    return data;\n  }\n\n  return null;\n}\n\nfunction getPopulateChild(firebase, populate, id) {\n  return firestoreRef(firebase, {\n    collection: populate.root,\n    doc: id\n  }).get().then(function (snap) {\n    return _objectSpread({\n      id: id\n    }, snap.data());\n  });\n}\n\nfunction populateList(firebase, originalObj, p, results) {\n  if (!results[p.root]) {\n    (0, _set2.default)(results, p.root, {});\n  }\n\n  return Promise.all((0, _map2.default)(originalObj, function (id, childKey) {\n    var populateKey = id === true || p.populateByKey ? childKey : id;\n    return getPopulateChild(firebase, p, populateKey).then(function (pc) {\n      if (pc) {\n        return (0, _set2.default)(results, \"\".concat(p.root, \".\").concat(populateKey), pc);\n      }\n\n      return results;\n    });\n  }));\n}\n\nfunction getPopulateObj(str) {\n  if (typeof str === 'string' || str instanceof String) {\n    return str;\n  }\n\n  var strArray = str.split(':');\n  return {\n    child: strArray[0],\n    root: strArray[1]\n  };\n}\n\nfunction getPopulateObjs(arr) {\n  if (!Array.isArray(arr)) {\n    return arr;\n  }\n\n  return arr.map(function (o) {\n    return (0, _isObject2.default)(o) ? o : getPopulateObj(o);\n  });\n}\n\nfunction promisesForPopulate(firebase, dataKey, originalData, populatesIn) {\n  var promisesArray = [];\n  var results = {};\n  var populatesForData = getPopulateObjs(typeof populatesIn === 'function' ? populatesIn(dataKey, originalData) : populatesIn);\n  var dataHasPopulateChilds = populatesForData.some(function (populate) {\n    return (0, _has2.default)(originalData, populate.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    populatesForData.forEach(function (p) {\n      var childDataVal = (0, _get2.default)(originalData, p.child);\n\n      if (typeof childDataVal === 'string' || childDataVal instanceof String) {\n        return promisesArray.push(getPopulateChild(firebase, p, childDataVal).then(function (v) {\n          if (v) {\n            (0, _set2.default)(results, \"\".concat(p.storeAs ? p.storeAs : p.root, \".\").concat(childDataVal), v);\n          }\n        }));\n      }\n\n      return promisesArray.push(populateList(firebase, childDataVal, p, results));\n    });\n  } else {\n    (0, _forEach2.default)(originalData, function (d, key) {\n      var populatesForDataItem = getPopulateObjs(typeof populatesIn === 'function' ? populatesIn(key, d) : populatesIn);\n      (0, _forEach2.default)(populatesForDataItem, function (p) {\n        var idOrList = (0, _get2.default)(d, p.child);\n\n        if (!idOrList) {\n          return;\n        }\n\n        if (typeof idOrList === 'string' || idOrList instanceof String) {\n          return promisesArray.push(getPopulateChild(firebase, p, idOrList).then(function (v) {\n            if (v) {\n              (0, _set2.default)(results, \"\".concat(p.storeAs ? p.storeAs : p.root, \".\").concat(idOrList), v);\n            }\n\n            return results;\n          }));\n        }\n\n        if (Array.isArray(idOrList) || (0, _isObject2.default)(idOrList)) {\n          return promisesArray.push(populateList(firebase, idOrList, p, results));\n        }\n      });\n    });\n  }\n\n  return Promise.all(promisesArray).then(function () {\n    return results;\n  });\n}\n\nvar changeTypeToEventType = {\n  added: _constants.actionTypes.DOCUMENT_ADDED,\n  removed: _constants.actionTypes.DOCUMENT_REMOVED,\n  modified: _constants.actionTypes.DOCUMENT_MODIFIED\n};\n\nfunction docChangeEvent(change) {\n  var originalMeta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var meta = _objectSpread({}, (0, _cloneDeep2.default)(originalMeta), {\n    path: change.doc.ref.path\n  });\n\n  if (originalMeta.subcollections && !originalMeta.storeAs) {\n    meta.subcollections[0] = _objectSpread({}, meta.subcollections[0], {\n      doc: change.doc.id\n    });\n  } else {\n    meta.doc = change.doc.id;\n  }\n\n  return {\n    type: changeTypeToEventType[change.type] || _constants.actionTypes.DOCUMENT_MODIFIED,\n    meta: meta,\n    payload: {\n      data: change.doc.data(),\n      ordered: {\n        oldIndex: change.oldIndex,\n        newIndex: change.newIndex\n      }\n    }\n  };\n}\n\nfunction dispatchListenerResponse(_ref9) {\n  var dispatch = _ref9.dispatch,\n      docData = _ref9.docData,\n      meta = _ref9.meta,\n      firebase = _ref9.firebase;\n\n  var _ref10 = firebase._.config || {},\n      mergeOrdered = _ref10.mergeOrdered,\n      mergeOrderedDocUpdates = _ref10.mergeOrderedDocUpdates,\n      mergeOrderedCollectionUpdates = _ref10.mergeOrderedCollectionUpdates;\n\n  var docChanges = typeof docData.docChanges === 'function' ? docData.docChanges() : docData.docChanges;\n\n  if (docChanges && docChanges.length < docData.size) {\n    docChanges.forEach(function (change) {\n      dispatch(docChangeEvent(change, meta));\n    });\n  } else {\n    dispatch({\n      type: _constants.actionTypes.LISTENER_RESPONSE,\n      meta: meta,\n      payload: {\n        data: dataByIdSnapshot(docData),\n        ordered: orderedFromSnap(docData)\n      },\n      merge: {\n        docs: mergeOrdered && mergeOrderedDocUpdates,\n        collections: mergeOrdered && mergeOrderedCollectionUpdates\n      }\n    });\n  }\n}\n\nfunction getPopulateActions(_ref11) {\n  var firebase = _ref11.firebase,\n      docData = _ref11.docData,\n      meta = _ref11.meta;\n  return promisesForPopulate(firebase, docData.id, dataByIdSnapshot(docData), meta.populates).then(function (populateResults) {\n    return Object.keys(populateResults).map(function (resultKey) {\n      return {\n        meta: {\n          collection: resultKey\n        },\n        payload: {\n          data: populateResults[resultKey]\n        },\n        requesting: false,\n        requested: true\n      };\n    });\n  }).catch(function (populateErr) {\n    console.error('Error with populate:', populateErr, meta);\n    return Promise.reject(populateErr);\n  });\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","getSnapshotByObject","firestoreRef","getQueryName","getBaseQueryName","listenerExists","attachListener","detachListener","queryStrToObj","getQueryConfig","getQueryConfigs","orderedFromSnap","dataByIdSnapshot","getPopulateChild","populateList","promisesForPopulate","dispatchListenerResponse","getPopulateActions","snapshotCache","_cloneDeep2","_interopRequireDefault","require","_set2","_get2","_map2","_has2","_forEach2","_trim2","_isEmpty2","_isNumber2","_isObject2","_constants","obj","__esModule","default","_toArray","arr","_arrayWithHoles","_iterableToArray","_nonIterableRest","TypeError","Array","isArray","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_toConsumableArray","_arrayWithoutHoles","_nonIterableSpread","iter","Symbol","iterator","toString","from","arr2","WeakMap","get","addWhereToRef","ref","where","Error","reduce","acc","whereArgs","addOrderByToRef","orderBy","String","orderByArgs","arrayify","cursor","concat","handleSubcollections","subcollectionList","subcollection","collection","doc","limit","startAt","_ref","startAfter","_ref2","endAt","_ref3","endBefore","_ref4","subcollections","firebase","meta","_ref5","_ref6","_ref7","_ref8","firestore","collectionGroup","arrayToStr","join","map","val","pickQueryParams","serialize","queryParams","undefined","storeAs","remainingMeta","basePath","console","error","mappedCollections","confirmMetaAndConfig","_","listeners","name","dispatch","unsubscribe","type","actionTypes","SET_LISTENER","payload","UNSET_LISTENER","queryPathStr","parsedPath","pathArr","split","_pathArr","slice","queryObj","query","queries","snap","ordered","data","exists","id","set","snapData","populate","root","then","originalObj","p","results","Promise","all","childKey","populateKey","populateByKey","pc","getPopulateObj","str","strArray","child","getPopulateObjs","o","dataKey","originalData","populatesIn","promisesArray","populatesForData","dataHasPopulateChilds","some","childDataVal","v","d","populatesForDataItem","idOrList","changeTypeToEventType","added","DOCUMENT_ADDED","removed","DOCUMENT_REMOVED","modified","DOCUMENT_MODIFIED","docChangeEvent","change","originalMeta","path","oldIndex","newIndex","_ref9","docData","_ref10","config","mergeOrdered","mergeOrderedDocUpdates","mergeOrderedCollectionUpdates","docChanges","size","LISTENER_RESPONSE","merge","docs","collections","_ref11","populates","populateResults","resultKey","requesting","requested","catch","populateErr","reject"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/redux-firestore/es/utils/query.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSnapshotByObject = getSnapshotByObject;\nexports.firestoreRef = firestoreRef;\nexports.getQueryName = getQueryName;\nexports.getBaseQueryName = getBaseQueryName;\nexports.listenerExists = listenerExists;\nexports.attachListener = attachListener;\nexports.detachListener = detachListener;\nexports.queryStrToObj = queryStrToObj;\nexports.getQueryConfig = getQueryConfig;\nexports.getQueryConfigs = getQueryConfigs;\nexports.orderedFromSnap = orderedFromSnap;\nexports.dataByIdSnapshot = dataByIdSnapshot;\nexports.getPopulateChild = getPopulateChild;\nexports.populateList = populateList;\nexports.promisesForPopulate = promisesForPopulate;\nexports.dispatchListenerResponse = dispatchListenerResponse;\nexports.getPopulateActions = getPopulateActions;\nexports.snapshotCache = void 0;\n\nvar _cloneDeep2 = _interopRequireDefault(require(\"lodash/cloneDeep\"));\n\nvar _set2 = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _get2 = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _map2 = _interopRequireDefault(require(\"lodash/map\"));\n\nvar _has2 = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _forEach2 = _interopRequireDefault(require(\"lodash/forEach\"));\n\nvar _trim2 = _interopRequireDefault(require(\"lodash/trim\"));\n\nvar _isEmpty2 = _interopRequireDefault(require(\"lodash/isEmpty\"));\n\nvar _isNumber2 = _interopRequireDefault(require(\"lodash/isNumber\"));\n\nvar _isObject2 = _interopRequireDefault(require(\"lodash/isObject\"));\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar snapshotCache = new WeakMap();\nexports.snapshotCache = snapshotCache;\n\nfunction getSnapshotByObject(obj) {\n  return snapshotCache.get(obj);\n}\n\nfunction addWhereToRef(ref, where) {\n  if (!Array.isArray(where)) {\n    throw new Error('where parameter must be an array.');\n  }\n\n  if (Array.isArray(where[0])) {\n    return where.reduce(function (acc, whereArgs) {\n      return addWhereToRef(acc, whereArgs);\n    }, ref);\n  }\n\n  return ref.where.apply(ref, _toConsumableArray(where));\n}\n\nfunction addOrderByToRef(ref, orderBy) {\n  if (!Array.isArray(orderBy) && !(typeof orderBy === 'string' || orderBy instanceof String)) {\n    throw new Error('orderBy parameter must be an array or string.');\n  }\n\n  if (typeof orderBy === 'string' || orderBy instanceof String) {\n    return ref.orderBy(orderBy);\n  }\n\n  if (typeof orderBy[0] === 'string' || orderBy[0] instanceof String) {\n    return ref.orderBy.apply(ref, _toConsumableArray(orderBy));\n  }\n\n  return orderBy.reduce(function (acc, orderByArgs) {\n    return addOrderByToRef(acc, orderByArgs);\n  }, ref);\n}\n\nfunction arrayify(cursor) {\n  return [].concat(cursor);\n}\n\nfunction handleSubcollections(ref, subcollectionList) {\n  if (Array.isArray(subcollectionList)) {\n    subcollectionList.forEach(function (subcollection) {\n      if (subcollection.collection) {\n        if (typeof ref.collection !== 'function') {\n          throw new Error(\"Collection can only be run on a document. Check that query config for subcollection: \\\"\".concat(subcollection.collection, \"\\\" contains a doc parameter.\"));\n        }\n\n        ref = ref.collection(subcollection.collection);\n      }\n\n      if (subcollection.doc) ref = ref.doc(subcollection.doc);\n      if (subcollection.where) ref = addWhereToRef(ref, subcollection.where);\n\n      if (subcollection.orderBy) {\n        ref = addOrderByToRef(ref, subcollection.orderBy);\n      }\n\n      if (subcollection.limit) ref = ref.limit(subcollection.limit);\n\n      if (subcollection.startAt) {\n        var _ref;\n\n        ref = (_ref = ref).startAt.apply(_ref, _toConsumableArray(arrayify(subcollection.startAt)));\n      }\n\n      if (subcollection.startAfter) {\n        var _ref2;\n\n        ref = (_ref2 = ref).startAfter.apply(_ref2, _toConsumableArray(arrayify(subcollection.startAfter)));\n      }\n\n      if (subcollection.endAt) {\n        var _ref3;\n\n        ref = (_ref3 = ref).endAt.apply(_ref3, _toConsumableArray(arrayify(subcollection.endAt)));\n      }\n\n      if (subcollection.endBefore) {\n        var _ref4;\n\n        ref = (_ref4 = ref).endBefore.apply(_ref4, _toConsumableArray(arrayify(subcollection.endBefore)));\n      }\n\n      ref = handleSubcollections(ref, subcollection.subcollections);\n    });\n  }\n\n  return ref;\n}\n\nfunction firestoreRef(firebase, meta) {\n  var _ref5, _ref6, _ref7, _ref8;\n\n  if (!firebase.firestore) {\n    throw new Error('Firestore must be required and initalized.');\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      where = meta.where,\n      orderBy = meta.orderBy,\n      limit = meta.limit,\n      startAt = meta.startAt,\n      startAfter = meta.startAfter,\n      endAt = meta.endAt,\n      endBefore = meta.endBefore;\n  var ref = firebase.firestore();\n\n  if (collection && collectionGroup) {\n    throw new Error('Reference cannot contain both Collection and CollectionGroup.');\n  }\n\n  if (collection) ref = ref.collection(collection);\n  if (collectionGroup) ref = ref.collectionGroup(collectionGroup);\n  if (doc) ref = ref.doc(doc);\n  ref = handleSubcollections(ref, subcollections);\n  if (where) ref = addWhereToRef(ref, where);\n  if (orderBy) ref = addOrderByToRef(ref, orderBy);\n  if (limit) ref = ref.limit(limit);\n  if (startAt) ref = (_ref5 = ref).startAt.apply(_ref5, _toConsumableArray(arrayify(startAt)));\n  if (startAfter) ref = (_ref6 = ref).startAfter.apply(_ref6, _toConsumableArray(arrayify(startAfter)));\n  if (endAt) ref = (_ref7 = ref).endAt.apply(_ref7, _toConsumableArray(arrayify(endAt)));\n  if (endBefore) ref = (_ref8 = ref).endBefore.apply(_ref8, _toConsumableArray(arrayify(endBefore)));\n  return ref;\n}\n\nfunction arrayToStr(key, value) {\n  if (typeof value === 'string' || value instanceof String || (0, _isNumber2.default)(value)) {\n    return \"\".concat(key, \"=\").concat(value);\n  }\n\n  if (typeof value[0] === 'string' || value[0] instanceof String) {\n    return \"\".concat(key, \"=\").concat(value.join(':'));\n  }\n\n  if (value && typeof value.toString === 'function') {\n    return \"\".concat(key, \"=\").concat(value.toString());\n  }\n\n  return value.map(function (val) {\n    return arrayToStr(key, val);\n  });\n}\n\nfunction pickQueryParams(obj) {\n  return ['where', 'orderBy', 'limit', 'startAfter', 'startAt', 'endAt', 'endBefore'].reduce(function (acc, key) {\n    return obj[key] ? _objectSpread({}, acc, _defineProperty({}, key, obj[key])) : acc;\n  }, {});\n}\n\nfunction serialize(queryParams) {\n  return Object.keys(queryParams).filter(function (key) {\n    return queryParams[key] !== undefined;\n  }).map(function (key) {\n    return arrayToStr(key, queryParams[key]);\n  }).join('&');\n}\n\nfunction getQueryName(meta) {\n  if (typeof meta === 'string' || meta instanceof String) {\n    return meta;\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      doc = meta.doc,\n      subcollections = meta.subcollections,\n      storeAs = meta.storeAs,\n      remainingMeta = _objectWithoutProperties(meta, [\"collection\", \"collectionGroup\", \"doc\", \"subcollections\", \"storeAs\"]);\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to build query name');\n  }\n\n  if (storeAs) {\n    return storeAs;\n  }\n\n  var basePath = collection || collectionGroup;\n\n  if (doc) {\n    basePath = basePath.concat(\"/\".concat(doc));\n  }\n\n  if (collection && subcollections) {\n    console.error('Queries with subcollections must use \"storeAs\" to prevent invalid store updates. This closley matches the upcoming major release (v1), which stores subcollections at the top level by default.');\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = \"\".concat(basePath, \"/\").concat(mappedCollections.join('/'));\n  }\n\n  var queryParams = pickQueryParams(remainingMeta);\n\n  if (!(0, _isEmpty2.default)(queryParams)) {\n    if (queryParams.where && !Array.isArray(queryParams.where)) {\n      throw new Error('where parameter must be an array.');\n    }\n\n    basePath = basePath.concat('?', serialize(queryParams));\n  }\n\n  return basePath;\n}\n\nfunction getBaseQueryName(meta) {\n  if (typeof meta === 'string' || meta instanceof String) {\n    return meta;\n  }\n\n  var collection = meta.collection,\n      collectionGroup = meta.collectionGroup,\n      subcollections = meta.subcollections,\n      remainingMeta = _objectWithoutProperties(meta, [\"collection\", \"collectionGroup\", \"subcollections\"]);\n\n  if (!collection && !collectionGroup) {\n    throw new Error('Collection or Collection Group is required to build query name');\n  }\n\n  var basePath = collection || collectionGroup;\n\n  if (collection && subcollections) {\n    var mappedCollections = subcollections.map(function (subcollection) {\n      return getQueryName(subcollection);\n    });\n    basePath = \"\".concat(basePath, \"/\").concat(mappedCollections.join('/'));\n  }\n\n  var queryParams = pickQueryParams(remainingMeta);\n\n  if (!(0, _isEmpty2.default)(queryParams)) {\n    if (queryParams.where && !Array.isArray(queryParams.where)) {\n      throw new Error('where parameter must be an array.');\n    }\n\n    basePath = basePath.concat('?', serialize(queryParams));\n  }\n\n  return basePath;\n}\n\nfunction confirmMetaAndConfig(firebase, meta) {\n  if (!meta) {\n    throw new Error('Meta data is required to attach listener.');\n  }\n\n  if (!firebase || !firebase._ || !firebase._.listeners) {\n    throw new Error('Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store');\n  }\n}\n\nfunction listenerExists(firebase, meta) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n  return !!firebase._.listeners[name];\n}\n\nfunction attachListener(firebase, dispatch, meta, unsubscribe) {\n  confirmMetaAndConfig(firebase, meta);\n  var name = getQueryName(meta);\n\n  if (!firebase._.listeners[name]) {\n    firebase._.listeners[name] = unsubscribe;\n  }\n\n  dispatch({\n    type: _constants.actionTypes.SET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n  return firebase._.listeners;\n}\n\nfunction detachListener(firebase, dispatch, meta) {\n  var name = getQueryName(meta);\n\n  if (firebase._.listeners[name]) {\n    firebase._.listeners[name]();\n\n    delete firebase._.listeners[name];\n  }\n\n  dispatch({\n    type: _constants.actionTypes.UNSET_LISTENER,\n    meta: meta,\n    payload: {\n      name: name\n    }\n  });\n}\n\nfunction queryStrToObj(queryPathStr, parsedPath) {\n  var pathArr = parsedPath || (0, _trim2.default)(queryPathStr, ['/']).split('/');\n\n  var _pathArr = _toArray(pathArr),\n      collection = _pathArr[0],\n      doc = _pathArr[1],\n      subcollections = _pathArr.slice(2);\n\n  var queryObj = {};\n  if (collection) queryObj.collection = collection;\n  if (doc) queryObj.doc = doc;\n\n  if (subcollections.length) {\n    queryObj.subcollections = [queryStrToObj('', subcollections)];\n  }\n\n  return queryObj;\n}\n\nfunction getQueryConfig(query) {\n  if (typeof query === 'string' || query instanceof String) {\n    return queryStrToObj(query);\n  }\n\n  if ((0, _isObject2.default)(query)) {\n    if (!query.collection && !query.collectionGroup && !query.doc) {\n      throw new Error('Collection, Collection Group and/or Doc are required parameters within query definition object.');\n    }\n\n    return query;\n  }\n\n  throw new Error('Invalid Path Definition: Only Strings and Objects are accepted.');\n}\n\nfunction getQueryConfigs(queries) {\n  if (Array.isArray(queries)) {\n    return queries.map(getQueryConfig);\n  }\n\n  if (typeof queries === 'string' || queries instanceof String) {\n    return queryStrToObj(queries);\n  }\n\n  if ((0, _isObject2.default)(queries)) {\n    return [getQueryConfig(queries)];\n  }\n\n  throw new Error('Querie(s) must be an Array or a string.');\n}\n\nfunction orderedFromSnap(snap) {\n  var ordered = [];\n\n  if (snap.data && snap.exists) {\n    var obj = (0, _isObject2.default)(snap.data()) ? _objectSpread({\n      id: snap.id\n    }, snap.data() || snap.data) : {\n      id: snap.id,\n      data: snap.data()\n    };\n    snapshotCache.set(obj, snap);\n    ordered.push(obj);\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var obj = (0, _isObject2.default)(doc.data()) ? _objectSpread({\n        id: doc.id\n      }, doc.data() || doc.data) : {\n        id: doc.id,\n        data: doc.data()\n      };\n      snapshotCache.set(obj, doc);\n      ordered.push(obj);\n    });\n  }\n\n  snapshotCache.set(ordered, snap);\n  return ordered;\n}\n\nfunction dataByIdSnapshot(snap) {\n  var data = {};\n\n  if (snap.data) {\n    var snapData = snap.exists ? snap.data() : null;\n\n    if (snapData) {\n      snapshotCache.set(snapData, snap);\n    }\n\n    data[snap.id] = snapData;\n  } else if (snap.forEach) {\n    snap.forEach(function (doc) {\n      var snapData = doc.data() || doc;\n      snapshotCache.set(snapData, doc);\n      data[doc.id] = snapData;\n    });\n  }\n\n  if (!!data && Object.keys(data).length) {\n    snapshotCache.set(data, snap);\n    return data;\n  }\n\n  return null;\n}\n\nfunction getPopulateChild(firebase, populate, id) {\n  return firestoreRef(firebase, {\n    collection: populate.root,\n    doc: id\n  }).get().then(function (snap) {\n    return _objectSpread({\n      id: id\n    }, snap.data());\n  });\n}\n\nfunction populateList(firebase, originalObj, p, results) {\n  if (!results[p.root]) {\n    (0, _set2.default)(results, p.root, {});\n  }\n\n  return Promise.all((0, _map2.default)(originalObj, function (id, childKey) {\n    var populateKey = id === true || p.populateByKey ? childKey : id;\n    return getPopulateChild(firebase, p, populateKey).then(function (pc) {\n      if (pc) {\n        return (0, _set2.default)(results, \"\".concat(p.root, \".\").concat(populateKey), pc);\n      }\n\n      return results;\n    });\n  }));\n}\n\nfunction getPopulateObj(str) {\n  if (typeof str === 'string' || str instanceof String) {\n    return str;\n  }\n\n  var strArray = str.split(':');\n  return {\n    child: strArray[0],\n    root: strArray[1]\n  };\n}\n\nfunction getPopulateObjs(arr) {\n  if (!Array.isArray(arr)) {\n    return arr;\n  }\n\n  return arr.map(function (o) {\n    return (0, _isObject2.default)(o) ? o : getPopulateObj(o);\n  });\n}\n\nfunction promisesForPopulate(firebase, dataKey, originalData, populatesIn) {\n  var promisesArray = [];\n  var results = {};\n  var populatesForData = getPopulateObjs(typeof populatesIn === 'function' ? populatesIn(dataKey, originalData) : populatesIn);\n  var dataHasPopulateChilds = populatesForData.some(function (populate) {\n    return (0, _has2.default)(originalData, populate.child);\n  });\n\n  if (dataHasPopulateChilds) {\n    populatesForData.forEach(function (p) {\n      var childDataVal = (0, _get2.default)(originalData, p.child);\n\n      if (typeof childDataVal === 'string' || childDataVal instanceof String) {\n        return promisesArray.push(getPopulateChild(firebase, p, childDataVal).then(function (v) {\n          if (v) {\n            (0, _set2.default)(results, \"\".concat(p.storeAs ? p.storeAs : p.root, \".\").concat(childDataVal), v);\n          }\n        }));\n      }\n\n      return promisesArray.push(populateList(firebase, childDataVal, p, results));\n    });\n  } else {\n    (0, _forEach2.default)(originalData, function (d, key) {\n      var populatesForDataItem = getPopulateObjs(typeof populatesIn === 'function' ? populatesIn(key, d) : populatesIn);\n      (0, _forEach2.default)(populatesForDataItem, function (p) {\n        var idOrList = (0, _get2.default)(d, p.child);\n\n        if (!idOrList) {\n          return;\n        }\n\n        if (typeof idOrList === 'string' || idOrList instanceof String) {\n          return promisesArray.push(getPopulateChild(firebase, p, idOrList).then(function (v) {\n            if (v) {\n              (0, _set2.default)(results, \"\".concat(p.storeAs ? p.storeAs : p.root, \".\").concat(idOrList), v);\n            }\n\n            return results;\n          }));\n        }\n\n        if (Array.isArray(idOrList) || (0, _isObject2.default)(idOrList)) {\n          return promisesArray.push(populateList(firebase, idOrList, p, results));\n        }\n      });\n    });\n  }\n\n  return Promise.all(promisesArray).then(function () {\n    return results;\n  });\n}\n\nvar changeTypeToEventType = {\n  added: _constants.actionTypes.DOCUMENT_ADDED,\n  removed: _constants.actionTypes.DOCUMENT_REMOVED,\n  modified: _constants.actionTypes.DOCUMENT_MODIFIED\n};\n\nfunction docChangeEvent(change) {\n  var originalMeta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var meta = _objectSpread({}, (0, _cloneDeep2.default)(originalMeta), {\n    path: change.doc.ref.path\n  });\n\n  if (originalMeta.subcollections && !originalMeta.storeAs) {\n    meta.subcollections[0] = _objectSpread({}, meta.subcollections[0], {\n      doc: change.doc.id\n    });\n  } else {\n    meta.doc = change.doc.id;\n  }\n\n  return {\n    type: changeTypeToEventType[change.type] || _constants.actionTypes.DOCUMENT_MODIFIED,\n    meta: meta,\n    payload: {\n      data: change.doc.data(),\n      ordered: {\n        oldIndex: change.oldIndex,\n        newIndex: change.newIndex\n      }\n    }\n  };\n}\n\nfunction dispatchListenerResponse(_ref9) {\n  var dispatch = _ref9.dispatch,\n      docData = _ref9.docData,\n      meta = _ref9.meta,\n      firebase = _ref9.firebase;\n\n  var _ref10 = firebase._.config || {},\n      mergeOrdered = _ref10.mergeOrdered,\n      mergeOrderedDocUpdates = _ref10.mergeOrderedDocUpdates,\n      mergeOrderedCollectionUpdates = _ref10.mergeOrderedCollectionUpdates;\n\n  var docChanges = typeof docData.docChanges === 'function' ? docData.docChanges() : docData.docChanges;\n\n  if (docChanges && docChanges.length < docData.size) {\n    docChanges.forEach(function (change) {\n      dispatch(docChangeEvent(change, meta));\n    });\n  } else {\n    dispatch({\n      type: _constants.actionTypes.LISTENER_RESPONSE,\n      meta: meta,\n      payload: {\n        data: dataByIdSnapshot(docData),\n        ordered: orderedFromSnap(docData)\n      },\n      merge: {\n        docs: mergeOrdered && mergeOrderedDocUpdates,\n        collections: mergeOrdered && mergeOrderedCollectionUpdates\n      }\n    });\n  }\n}\n\nfunction getPopulateActions(_ref11) {\n  var firebase = _ref11.firebase,\n      docData = _ref11.docData,\n      meta = _ref11.meta;\n  return promisesForPopulate(firebase, docData.id, dataByIdSnapshot(docData), meta.populates).then(function (populateResults) {\n    return Object.keys(populateResults).map(function (resultKey) {\n      return {\n        meta: {\n          collection: resultKey\n        },\n        payload: {\n          data: populateResults[resultKey]\n        },\n        requesting: false,\n        requested: true\n      };\n    });\n  }).catch(function (populateErr) {\n    console.error('Error with populate:', populateErr, meta);\n    return Promise.reject(populateErr);\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"script"}