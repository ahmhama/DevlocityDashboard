{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.showMissingCaptcha = showMissingCaptcha;\nexports.setCaptchaParams = setCaptchaParams;\nexports.swapCaptcha = swapCaptcha;\n\nvar _index = require('../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../field/index');\n\nvar c = _interopRequireWildcard(_index2);\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _index3 = require('../store/index');\n\nvar _web_api = require('../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n/**\n * Display the error message of missing captcha in the header of lock.\n *\n * @param {Object} m model\n * @param {Number} id\n */\n\n\nfunction showMissingCaptcha(m, id) {\n  var captchaConfig = l.captcha(m);\n  var captchaError = captchaConfig.get('provider') === 'recaptcha_v2' ? 'invalid_recaptcha' : 'invalid_captcha';\n  var errorMessage = i18n.html(m, ['error', 'login', captchaError]);\n  (0, _index3.swap)(_index3.updateEntity, 'lock', id, function (m) {\n    m = l.setSubmitting(m, false, errorMessage);\n    return c.showInvalidField(m, 'captcha');\n  });\n  return m;\n}\n/**\n * Set the captcha value in the fields object before sending the request.\n *\n * @param {Object} m model\n * @param {Object} params\n * @param {Object} fields\n *\n * @returns {Boolean} returns true if is required and missing the response from the user\n */\n\n\nfunction setCaptchaParams(m, params, fields) {\n  var captchaConfig = l.captcha(m);\n  var isCaptchaRequired = captchaConfig && l.captcha(m).get('required');\n\n  if (!isCaptchaRequired) {\n    return true;\n  }\n\n  var captcha = c.getFieldValue(m, 'captcha'); //captcha required and missing\n\n  if (!captcha) {\n    return false;\n  }\n\n  params['captcha'] = captcha;\n  fields.push('captcha');\n  return true;\n}\n/**\n * Get a new challenge and display the new captcha image.\n *\n * @param {number} id The id of the Lock instance.\n * @param {boolean} wasInvalid A boolean indicating if the previous captcha was invalid.\n * @param {Function} [next] A callback.\n */\n\n\nfunction swapCaptcha(id, wasInvalid, next) {\n  return _web_api2.default.getChallenge(id, function (err, newCaptcha) {\n    if (!err && newCaptcha) {\n      (0, _index3.swap)(_index3.updateEntity, 'lock', id, l.setCaptcha, newCaptcha, wasInvalid);\n    }\n\n    if (next) {\n      next();\n    }\n  });\n}","map":{"version":3,"names":["exports","__esModule","showMissingCaptcha","setCaptchaParams","swapCaptcha","_index","require","l","_interopRequireWildcard","_index2","c","_i18n","i18n","_index3","_web_api","_web_api2","_interopRequireDefault","obj","default","newObj","key","Object","prototype","hasOwnProperty","call","m","id","captchaConfig","captcha","captchaError","get","errorMessage","html","swap","updateEntity","setSubmitting","showInvalidField","params","fields","isCaptchaRequired","getFieldValue","push","wasInvalid","next","getChallenge","err","newCaptcha","setCaptcha"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/connection/captcha.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.showMissingCaptcha = showMissingCaptcha;\nexports.setCaptchaParams = setCaptchaParams;\nexports.swapCaptcha = swapCaptcha;\n\nvar _index = require('../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../field/index');\n\nvar c = _interopRequireWildcard(_index2);\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _index3 = require('../store/index');\n\nvar _web_api = require('../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Display the error message of missing captcha in the header of lock.\n *\n * @param {Object} m model\n * @param {Number} id\n */\nfunction showMissingCaptcha(m, id) {\n  var captchaConfig = l.captcha(m);\n\n  var captchaError = captchaConfig.get('provider') === 'recaptcha_v2' ? 'invalid_recaptcha' : 'invalid_captcha';\n\n  var errorMessage = i18n.html(m, ['error', 'login', captchaError]);\n\n  (0, _index3.swap)(_index3.updateEntity, 'lock', id, function (m) {\n    m = l.setSubmitting(m, false, errorMessage);\n    return c.showInvalidField(m, 'captcha');\n  });\n\n  return m;\n}\n\n/**\n * Set the captcha value in the fields object before sending the request.\n *\n * @param {Object} m model\n * @param {Object} params\n * @param {Object} fields\n *\n * @returns {Boolean} returns true if is required and missing the response from the user\n */\nfunction setCaptchaParams(m, params, fields) {\n  var captchaConfig = l.captcha(m);\n  var isCaptchaRequired = captchaConfig && l.captcha(m).get('required');\n\n  if (!isCaptchaRequired) {\n    return true;\n  }\n  var captcha = c.getFieldValue(m, 'captcha');\n  //captcha required and missing\n  if (!captcha) {\n    return false;\n  }\n\n  params['captcha'] = captcha;\n  fields.push('captcha');\n  return true;\n}\n\n/**\n * Get a new challenge and display the new captcha image.\n *\n * @param {number} id The id of the Lock instance.\n * @param {boolean} wasInvalid A boolean indicating if the previous captcha was invalid.\n * @param {Function} [next] A callback.\n */\nfunction swapCaptcha(id, wasInvalid, next) {\n  return _web_api2.default.getChallenge(id, function (err, newCaptcha) {\n    if (!err && newCaptcha) {\n      (0, _index3.swap)(_index3.updateEntity, 'lock', id, l.setCaptcha, newCaptcha, wasInvalid);\n    }\n    if (next) {\n      next();\n    }\n  });\n}\n"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,kBAAR,GAA6BA,kBAA7B;AACAF,OAAO,CAACG,gBAAR,GAA2BA,gBAA3B;AACAH,OAAO,CAACI,WAAR,GAAsBA,WAAtB;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,eAAD,CAApB;;AAEA,IAAIC,CAAC,GAAGC,uBAAuB,CAACH,MAAD,CAA/B;;AAEA,IAAII,OAAO,GAAGH,OAAO,CAAC,gBAAD,CAArB;;AAEA,IAAII,CAAC,GAAGF,uBAAuB,CAACC,OAAD,CAA/B;;AAEA,IAAIE,KAAK,GAAGL,OAAO,CAAC,SAAD,CAAnB;;AAEA,IAAIM,IAAI,GAAGJ,uBAAuB,CAACG,KAAD,CAAlC;;AAEA,IAAIE,OAAO,GAAGP,OAAO,CAAC,gBAAD,CAArB;;AAEA,IAAIQ,QAAQ,GAAGR,OAAO,CAAC,iBAAD,CAAtB;;AAEA,IAAIS,SAAS,GAAGC,sBAAsB,CAACF,QAAD,CAAtC;;AAEA,SAASE,sBAAT,CAAgCC,GAAhC,EAAqC;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAAChB,UAAX,GAAwBgB,GAAxB,GAA8B;IAAEC,OAAO,EAAED;EAAX,CAArC;AAAwD;;AAE/F,SAAST,uBAAT,CAAiCS,GAAjC,EAAsC;EAAE,IAAIA,GAAG,IAAIA,GAAG,CAAChB,UAAf,EAA2B;IAAE,OAAOgB,GAAP;EAAa,CAA1C,MAAgD;IAAE,IAAIE,MAAM,GAAG,EAAb;;IAAiB,IAAIF,GAAG,IAAI,IAAX,EAAiB;MAAE,KAAK,IAAIG,GAAT,IAAgBH,GAAhB,EAAqB;QAAE,IAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,GAArC,EAA0CG,GAA1C,CAAJ,EAAoDD,MAAM,CAACC,GAAD,CAAN,GAAcH,GAAG,CAACG,GAAD,CAAjB;MAAyB;IAAE;;IAACD,MAAM,CAACD,OAAP,GAAiBD,GAAjB;IAAsB,OAAOE,MAAP;EAAgB;AAAE;AAE7Q;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASjB,kBAAT,CAA4BuB,CAA5B,EAA+BC,EAA/B,EAAmC;EACjC,IAAIC,aAAa,GAAGpB,CAAC,CAACqB,OAAF,CAAUH,CAAV,CAApB;EAEA,IAAII,YAAY,GAAGF,aAAa,CAACG,GAAd,CAAkB,UAAlB,MAAkC,cAAlC,GAAmD,mBAAnD,GAAyE,iBAA5F;EAEA,IAAIC,YAAY,GAAGnB,IAAI,CAACoB,IAAL,CAAUP,CAAV,EAAa,CAAC,OAAD,EAAU,OAAV,EAAmBI,YAAnB,CAAb,CAAnB;EAEA,CAAC,GAAGhB,OAAO,CAACoB,IAAZ,EAAkBpB,OAAO,CAACqB,YAA1B,EAAwC,MAAxC,EAAgDR,EAAhD,EAAoD,UAAUD,CAAV,EAAa;IAC/DA,CAAC,GAAGlB,CAAC,CAAC4B,aAAF,CAAgBV,CAAhB,EAAmB,KAAnB,EAA0BM,YAA1B,CAAJ;IACA,OAAOrB,CAAC,CAAC0B,gBAAF,CAAmBX,CAAnB,EAAsB,SAAtB,CAAP;EACD,CAHD;EAKA,OAAOA,CAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAStB,gBAAT,CAA0BsB,CAA1B,EAA6BY,MAA7B,EAAqCC,MAArC,EAA6C;EAC3C,IAAIX,aAAa,GAAGpB,CAAC,CAACqB,OAAF,CAAUH,CAAV,CAApB;EACA,IAAIc,iBAAiB,GAAGZ,aAAa,IAAIpB,CAAC,CAACqB,OAAF,CAAUH,CAAV,EAAaK,GAAb,CAAiB,UAAjB,CAAzC;;EAEA,IAAI,CAACS,iBAAL,EAAwB;IACtB,OAAO,IAAP;EACD;;EACD,IAAIX,OAAO,GAAGlB,CAAC,CAAC8B,aAAF,CAAgBf,CAAhB,EAAmB,SAAnB,CAAd,CAP2C,CAQ3C;;EACA,IAAI,CAACG,OAAL,EAAc;IACZ,OAAO,KAAP;EACD;;EAEDS,MAAM,CAAC,SAAD,CAAN,GAAoBT,OAApB;EACAU,MAAM,CAACG,IAAP,CAAY,SAAZ;EACA,OAAO,IAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASrC,WAAT,CAAqBsB,EAArB,EAAyBgB,UAAzB,EAAqCC,IAArC,EAA2C;EACzC,OAAO5B,SAAS,CAACG,OAAV,CAAkB0B,YAAlB,CAA+BlB,EAA/B,EAAmC,UAAUmB,GAAV,EAAeC,UAAf,EAA2B;IACnE,IAAI,CAACD,GAAD,IAAQC,UAAZ,EAAwB;MACtB,CAAC,GAAGjC,OAAO,CAACoB,IAAZ,EAAkBpB,OAAO,CAACqB,YAA1B,EAAwC,MAAxC,EAAgDR,EAAhD,EAAoDnB,CAAC,CAACwC,UAAtD,EAAkED,UAAlE,EAA8EJ,UAA9E;IACD;;IACD,IAAIC,IAAJ,EAAU;MACRA,IAAI;IACL;EACF,CAPM,CAAP;AAQD"},"metadata":{},"sourceType":"script"}