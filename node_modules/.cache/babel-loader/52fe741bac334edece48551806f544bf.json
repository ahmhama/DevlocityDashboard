{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.getUsernameValidation = getUsernameValidation;\nexports.setUsername = setUsername;\nexports.usernameLooksLikeEmail = usernameLooksLikeEmail;\n\nvar _index = require('./index');\n\nvar _email = require('./email');\n\nvar _database = require('../connection/database');\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_CONNECTION_VALIDATION = {\n  username: {\n    min: 1,\n    max: 15\n  }\n};\nvar regExp = /^[a-zA-Z0-9_+\\-.!#\\$\\^`~@']*$/;\n\nfunction validateUsername(str, validateFormat) {\n  var settings = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_CONNECTION_VALIDATION.username;\n  var strictValidation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; // If the connection does not have validation settings, it should only check if the field is empty.\n  // validateFormat overrides this logic to disable validation on login (login should never validate format)\n\n  if (!validateFormat || settings == null) {\n    return (0, _trim2.default)(str).length > 0;\n  }\n\n  var lowercased = (0, _trim2.default)(str.toLowerCase()); // check min value matched\n\n  if (lowercased.length < settings.min) {\n    return false;\n  } // check max value matched\n\n\n  if (lowercased.length > settings.max) {\n    return false;\n  } // check if user name is an email\n\n\n  if (strictValidation && (0, _email.validateEmail)(str) === true) {\n    return false;\n  } // check allowed characters matched\n\n\n  var result = regExp.exec(lowercased);\n  return !!(result && result[0]);\n}\n\nfunction getUsernameValidation(m) {\n  var usernameValidation = (0, _database.databaseConnection)(m).getIn(['validation', 'username']);\n  return usernameValidation ? usernameValidation.toJS() : null;\n}\n\nfunction setUsername(m, str) {\n  var usernameStyle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'username';\n  var validateUsernameFormat = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  var strictValidation = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var usernameValidation = validateUsernameFormat ? getUsernameValidation(m) : null;\n\n  var validator = function validator(value) {\n    switch (usernameStyle) {\n      case 'email':\n        return (0, _email.validateEmail)(value);\n\n      case 'username':\n        return validateUsername(value, validateUsernameFormat, usernameValidation, strictValidation);\n\n      default:\n        return usernameLooksLikeEmail(value) ? (0, _email.validateEmail)(value) : validateUsername(value, validateUsernameFormat, usernameValidation, strictValidation);\n    }\n  };\n\n  return (0, _index.setField)(m, 'username', str, validator);\n}\n\nfunction usernameLooksLikeEmail(str) {\n  return str.indexOf('@') > -1 && str.indexOf('.') > -1;\n}","map":{"version":3,"names":["exports","__esModule","getUsernameValidation","setUsername","usernameLooksLikeEmail","_index","require","_email","_database","_trim","_trim2","_interopRequireDefault","obj","default","DEFAULT_CONNECTION_VALIDATION","username","min","max","regExp","validateUsername","str","validateFormat","settings","arguments","length","undefined","strictValidation","lowercased","toLowerCase","validateEmail","result","exec","m","usernameValidation","databaseConnection","getIn","toJS","usernameStyle","validateUsernameFormat","validator","value","setField","indexOf"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/field/username.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.getUsernameValidation = getUsernameValidation;\nexports.setUsername = setUsername;\nexports.usernameLooksLikeEmail = usernameLooksLikeEmail;\n\nvar _index = require('./index');\n\nvar _email = require('./email');\n\nvar _database = require('../connection/database');\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULT_CONNECTION_VALIDATION = { username: { min: 1, max: 15 } };\nvar regExp = /^[a-zA-Z0-9_+\\-.!#\\$\\^`~@']*$/;\n\nfunction validateUsername(str, validateFormat) {\n  var settings = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_CONNECTION_VALIDATION.username;\n  var strictValidation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  // If the connection does not have validation settings, it should only check if the field is empty.\n  // validateFormat overrides this logic to disable validation on login (login should never validate format)\n  if (!validateFormat || settings == null) {\n    return (0, _trim2.default)(str).length > 0;\n  }\n\n  var lowercased = (0, _trim2.default)(str.toLowerCase());\n\n  // check min value matched\n  if (lowercased.length < settings.min) {\n    return false;\n  }\n\n  // check max value matched\n  if (lowercased.length > settings.max) {\n    return false;\n  }\n\n  // check if user name is an email\n  if (strictValidation && (0, _email.validateEmail)(str) === true) {\n    return false;\n  }\n\n  // check allowed characters matched\n  var result = regExp.exec(lowercased);\n  return !!(result && result[0]);\n}\n\nfunction getUsernameValidation(m) {\n  var usernameValidation = (0, _database.databaseConnection)(m).getIn(['validation', 'username']);\n  return usernameValidation ? usernameValidation.toJS() : null;\n}\n\nfunction setUsername(m, str) {\n  var usernameStyle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'username';\n  var validateUsernameFormat = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  var strictValidation = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  var usernameValidation = validateUsernameFormat ? getUsernameValidation(m) : null;\n\n  var validator = function validator(value) {\n    switch (usernameStyle) {\n      case 'email':\n        return (0, _email.validateEmail)(value);\n      case 'username':\n        return validateUsername(value, validateUsernameFormat, usernameValidation, strictValidation);\n      default:\n        return usernameLooksLikeEmail(value) ? (0, _email.validateEmail)(value) : validateUsername(value, validateUsernameFormat, usernameValidation, strictValidation);\n    }\n  };\n\n  return (0, _index.setField)(m, 'username', str, validator);\n}\n\nfunction usernameLooksLikeEmail(str) {\n  return str.indexOf('@') > -1 && str.indexOf('.') > -1;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}