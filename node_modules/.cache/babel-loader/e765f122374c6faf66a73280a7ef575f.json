{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.logIn = logIn;\nexports.signUp = signUp;\nexports.signUpError = signUpError;\nexports.resetPassword = resetPassword;\nexports.showLoginActivity = showLoginActivity;\nexports.showSignUpActivity = showSignUpActivity;\nexports.showResetPasswordActivity = showResetPasswordActivity;\nexports.cancelResetPassword = cancelResetPassword;\nexports.cancelMFALogin = cancelMFALogin;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.showLoginMFAActivity = showLoginMFAActivity;\n\nvar _index = require('../../store/index');\n\nvar _web_api = require('../../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nvar _actions = require('../../core/actions');\n\nvar _index2 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nvar _index3 = require('../../field/index');\n\nvar c = _interopRequireWildcard(_index3);\n\nvar _dompurify = require('dompurify');\n\nvar _index4 = require('./index');\n\nvar _i18n = require('../../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _captcha = require('../captcha');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction logIn(id) {\n  var needsMFA = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var username = c.getFieldValue(m, usernameField);\n  var params = {\n    connection: (0, _index4.databaseConnectionName)(m),\n    username: username,\n    password: c.getFieldValue(m, 'password')\n  };\n  var fields = [usernameField, 'password'];\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n\n  if (!isCaptchaValid) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n\n  var mfaCode = c.getFieldValue(m, 'mfa_code');\n\n  if (needsMFA) {\n    params['mfa_code'] = mfaCode;\n    fields.push('mfa_code');\n  }\n\n  (0, _actions.logIn)(id, fields, params, function (id, error, fields, next) {\n    if (error.error === 'a0.mfa_required') {\n      return showLoginMFAActivity(id);\n    }\n\n    if (error) {\n      var wasInvalid = error && error.code === 'invalid_captcha';\n      return (0, _captcha.swapCaptcha)(id, wasInvalid, next);\n    }\n\n    next();\n  });\n}\n\nfunction generateRandomUsername(length) {\n  var result = '';\n  var characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n\n  return result;\n}\n\nfunction signUp(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var fields = ['email', 'password']; // Skip the username validation if signUpHideUsernameField option is enabled.\n  // We will generate a random username to avoid name collusion before we make the signup API call.\n\n  if ((0, _index4.databaseConnectionRequiresUsername)(m) && !(0, _index4.signUpHideUsernameField)(m)) fields.push('username');\n  (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n    return fields.push(x.get('name'));\n  });\n  (0, _actions.validateAndSubmit)(id, fields, function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email'),\n      password: c.getFieldValue(m, 'password'),\n      autoLogin: (0, _index4.shouldAutoLogin)(m)\n    };\n    var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n\n    if (!isCaptchaValid) {\n      return (0, _captcha.showMissingCaptcha)(m, id);\n    }\n\n    if ((0, _index4.databaseConnectionRequiresUsername)(m)) {\n      if ((0, _index4.signUpHideUsernameField)(m)) {\n        var usernameValidation = (0, _index4.databaseConnection)(m).getIn(['validation', 'username']);\n        var range = usernameValidation ? usernameValidation.toJS() : {\n          max: 15\n        };\n        params.username = generateRandomUsername(range.max);\n      } else {\n        params.username = c.getFieldValue(m, 'username');\n      }\n    }\n\n    if (!(0, _index4.additionalSignUpFields)(m).isEmpty()) {\n      params.user_metadata = {};\n      (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n        var storage = x.get('storage');\n        var fieldName = x.get('name');\n        var fieldValue = (0, _dompurify.sanitize)(c.getFieldValue(m, x.get('name')), {\n          ALLOWED_TAGS: []\n        });\n\n        switch (storage) {\n          case 'root':\n            params[fieldName] = fieldValue;\n            break;\n\n          default:\n            if (!params.user_metadata) {\n              params.user_metadata = {};\n            }\n\n            params.user_metadata[fieldName] = fieldValue;\n            break;\n        }\n      });\n    }\n\n    var errorHandler = function errorHandler(error, popupHandler) {\n      if (!!popupHandler) {\n        popupHandler._current_popup.kill();\n      }\n\n      var wasInvalidCaptcha = error && error.code === 'invalid_captcha';\n      (0, _captcha.swapCaptcha)(id, wasInvalidCaptcha, function () {\n        setTimeout(function () {\n          return signUpError(id, error);\n        }, 250);\n      });\n    };\n\n    try {\n      // For now, always pass 'null' for the context as we don't need it yet.\n      // If we need it later, it'll save a breaking change in hooks already in use.\n      var context = null;\n      l.runHook(m, 'signingUp', context, function () {\n        _web_api2.default.signUp(id, params, function (error, result, popupHandler) {\n          for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            args[_key - 3] = arguments[_key];\n          }\n\n          if (error) {\n            errorHandler(error, popupHandler);\n          } else {\n            signUpSuccess.apply(undefined, [id, result, popupHandler].concat(args));\n          }\n        });\n      });\n    } catch (e) {\n      errorHandler(e);\n    }\n  });\n}\n\nfunction signUpSuccess(id, result, popupHandler) {\n  var lock = (0, _index.read)(_index.getEntity, 'lock', id);\n  l.emitEvent(lock, 'signup success', result);\n\n  if ((0, _index4.shouldAutoLogin)(lock)) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return m.set('signedUp', true);\n    }); // TODO: check options, redirect is missing\n\n    var options = {\n      connection: (0, _index4.databaseConnectionName)(lock),\n      username: c.email(lock),\n      password: c.password(lock)\n    };\n\n    if (!!popupHandler) {\n      options.popupHandler = popupHandler;\n    }\n\n    return _web_api2.default.logIn(id, options, l.auth.params(lock).toJS(), function (error) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      if (error) {\n        setTimeout(function () {\n          return autoLogInError(id, error);\n        }, 250);\n      } else {\n        _actions.logInSuccess.apply(undefined, [id].concat(args));\n      }\n    });\n  }\n\n  var autoclose = l.ui.autoclose(lock);\n\n  if (!autoclose) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (lock) {\n      return l.setSubmitting(lock, false).set('signedUp', true);\n    });\n  } else {\n    (0, _actions.closeLock)(id, false);\n  }\n}\n\nfunction signUpError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var invalidPasswordKeys = {\n    PasswordDictionaryError: 'password_dictionary_error',\n    PasswordNoUserInfoError: 'password_no_user_info_error',\n    PasswordStrengthError: 'password_strength_error'\n  };\n  l.emitEvent(m, 'signup error', error);\n  var errorKey = error.code === 'invalid_password' && invalidPasswordKeys[error.name] || error.code;\n  var errorMessage = i18n.html(m, ['error', 'signUp', errorKey]) || i18n.html(m, ['error', 'signUp', 'lock.fallback']);\n\n  if (error.code === 'hook_error') {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, error.description || errorMessage);\n    return;\n  }\n\n  if (errorKey === 'invalid_captcha') {\n    errorMessage = i18n.html(m, ['error', 'login', errorKey]);\n    return (0, _captcha.swapCaptcha)(id, true, function () {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n    });\n  }\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction autoLogInError(id, error) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    var errorMessage = l.loginErrorMessage(m, error);\n\n    if ((0, _index4.hasScreen)(m, 'login')) {\n      return l.setSubmitting((0, _index4.setScreen)(m, 'login'), false, errorMessage);\n    } else {\n      return l.setSubmitting(m, false, errorMessage);\n    }\n  });\n}\n\nfunction resetPassword(id) {\n  (0, _actions.validateAndSubmit)(id, ['email'], function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email')\n    };\n\n    _web_api2.default.resetPassword(id, params, function (error) {\n      if (error) {\n        setTimeout(function () {\n          return resetPasswordError(id, error);\n        }, 250);\n      } else {\n        resetPasswordSuccess(id);\n      }\n    });\n  });\n}\n\nfunction resetPasswordSuccess(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  if ((0, _index4.hasScreen)(m, 'login')) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return (0, _index4.setScreen)(l.setSubmitting(m, false), 'login', ['']);\n    } // array with one empty string tells the function to not clear any field\n    ); // TODO: should be handled by box\n\n    setTimeout(function () {\n      var successMessage = i18n.html(m, ['success', 'forgotPassword']);\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setGlobalSuccess, successMessage);\n    }, 500);\n  } else {\n    if (l.ui.autoclose(m)) {\n      (0, _actions.closeLock)(id);\n    } else {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n        return l.setSubmitting(m, false).set('passwordResetted', true);\n      });\n    }\n  }\n}\n\nfunction resetPasswordError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var errorMessage = i18n.html(m, ['error', 'forgotPassword', error.code]) || i18n.html(m, ['error', 'forgotPassword', 'lock.fallback']);\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction showLoginActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'login', fields);\n}\n\nfunction showSignUpActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'signUp', fields);\n}\n\nfunction showResetPasswordActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'forgotPassword', fields);\n}\n\nfunction cancelResetPassword(id) {\n  return showLoginActivity(id);\n}\n\nfunction cancelMFALogin(id) {\n  return showLoginActivity(id);\n}\n\nfunction toggleTermsAcceptance(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.toggleTermsAcceptance);\n}\n\nfunction showLoginMFAActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['mfa_code'];\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'mfaLogin', fields);\n}","map":{"version":3,"names":["exports","__esModule","logIn","signUp","signUpError","resetPassword","showLoginActivity","showSignUpActivity","showResetPasswordActivity","cancelResetPassword","cancelMFALogin","toggleTermsAcceptance","showLoginMFAActivity","_index","require","_web_api","_web_api2","_interopRequireDefault","_actions","_index2","l","_interopRequireWildcard","_index3","c","_dompurify","_index4","_i18n","i18n","_captcha","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","id","needsMFA","arguments","length","undefined","m","read","getEntity","usernameField","databaseLogInWithEmail","username","getFieldValue","params","connection","databaseConnectionName","password","fields","isCaptchaValid","setCaptchaParams","showMissingCaptcha","mfaCode","push","error","next","wasInvalid","code","swapCaptcha","generateRandomUsername","result","characters","charactersLength","i","charAt","Math","floor","random","databaseConnectionRequiresUsername","signUpHideUsernameField","additionalSignUpFields","forEach","x","get","validateAndSubmit","email","autoLogin","shouldAutoLogin","usernameValidation","databaseConnection","getIn","range","toJS","max","isEmpty","user_metadata","storage","fieldName","fieldValue","sanitize","ALLOWED_TAGS","errorHandler","popupHandler","_current_popup","kill","wasInvalidCaptcha","setTimeout","context","runHook","_len","args","Array","_key","signUpSuccess","apply","concat","e","lock","emitEvent","swap","updateEntity","set","options","auth","_len2","_key2","autoLogInError","logInSuccess","autoclose","ui","setSubmitting","closeLock","invalidPasswordKeys","PasswordDictionaryError","PasswordNoUserInfoError","PasswordStrengthError","errorKey","name","errorMessage","html","description","loginErrorMessage","hasScreen","setScreen","resetPasswordError","resetPasswordSuccess","successMessage","setGlobalSuccess"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/connection/database/actions.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.logIn = logIn;\nexports.signUp = signUp;\nexports.signUpError = signUpError;\nexports.resetPassword = resetPassword;\nexports.showLoginActivity = showLoginActivity;\nexports.showSignUpActivity = showSignUpActivity;\nexports.showResetPasswordActivity = showResetPasswordActivity;\nexports.cancelResetPassword = cancelResetPassword;\nexports.cancelMFALogin = cancelMFALogin;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.showLoginMFAActivity = showLoginMFAActivity;\n\nvar _index = require('../../store/index');\n\nvar _web_api = require('../../core/web_api');\n\nvar _web_api2 = _interopRequireDefault(_web_api);\n\nvar _actions = require('../../core/actions');\n\nvar _index2 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nvar _index3 = require('../../field/index');\n\nvar c = _interopRequireWildcard(_index3);\n\nvar _dompurify = require('dompurify');\n\nvar _index4 = require('./index');\n\nvar _i18n = require('../../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _captcha = require('../captcha');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction logIn(id) {\n  var needsMFA = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var username = c.getFieldValue(m, usernameField);\n\n  var params = {\n    connection: (0, _index4.databaseConnectionName)(m),\n    username: username,\n    password: c.getFieldValue(m, 'password')\n  };\n\n  var fields = [usernameField, 'password'];\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n\n  if (!isCaptchaValid) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n\n  var mfaCode = c.getFieldValue(m, 'mfa_code');\n\n  if (needsMFA) {\n    params['mfa_code'] = mfaCode;\n    fields.push('mfa_code');\n  }\n\n  (0, _actions.logIn)(id, fields, params, function (id, error, fields, next) {\n    if (error.error === 'a0.mfa_required') {\n      return showLoginMFAActivity(id);\n    }\n\n    if (error) {\n      var wasInvalid = error && error.code === 'invalid_captcha';\n      return (0, _captcha.swapCaptcha)(id, wasInvalid, next);\n    }\n\n    next();\n  });\n}\n\nfunction generateRandomUsername(length) {\n  var result = '';\n  var characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nfunction signUp(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var fields = ['email', 'password'];\n\n  // Skip the username validation if signUpHideUsernameField option is enabled.\n  // We will generate a random username to avoid name collusion before we make the signup API call.\n  if ((0, _index4.databaseConnectionRequiresUsername)(m) && !(0, _index4.signUpHideUsernameField)(m)) fields.push('username');\n\n  (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n    return fields.push(x.get('name'));\n  });\n\n  (0, _actions.validateAndSubmit)(id, fields, function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email'),\n      password: c.getFieldValue(m, 'password'),\n      autoLogin: (0, _index4.shouldAutoLogin)(m)\n    };\n\n    var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n    if (!isCaptchaValid) {\n      return (0, _captcha.showMissingCaptcha)(m, id);\n    }\n\n    if ((0, _index4.databaseConnectionRequiresUsername)(m)) {\n      if ((0, _index4.signUpHideUsernameField)(m)) {\n        var usernameValidation = (0, _index4.databaseConnection)(m).getIn(['validation', 'username']);\n        var range = usernameValidation ? usernameValidation.toJS() : { max: 15 };\n        params.username = generateRandomUsername(range.max);\n      } else {\n        params.username = c.getFieldValue(m, 'username');\n      }\n    }\n\n    if (!(0, _index4.additionalSignUpFields)(m).isEmpty()) {\n      params.user_metadata = {};\n      (0, _index4.additionalSignUpFields)(m).forEach(function (x) {\n        var storage = x.get('storage');\n        var fieldName = x.get('name');\n        var fieldValue = (0, _dompurify.sanitize)(c.getFieldValue(m, x.get('name')), { ALLOWED_TAGS: [] });\n\n        switch (storage) {\n          case 'root':\n            params[fieldName] = fieldValue;\n            break;\n          default:\n            if (!params.user_metadata) {\n              params.user_metadata = {};\n            }\n            params.user_metadata[fieldName] = fieldValue;\n            break;\n        }\n      });\n    }\n\n    var errorHandler = function errorHandler(error, popupHandler) {\n      if (!!popupHandler) {\n        popupHandler._current_popup.kill();\n      }\n\n      var wasInvalidCaptcha = error && error.code === 'invalid_captcha';\n\n      (0, _captcha.swapCaptcha)(id, wasInvalidCaptcha, function () {\n        setTimeout(function () {\n          return signUpError(id, error);\n        }, 250);\n      });\n    };\n\n    try {\n      // For now, always pass 'null' for the context as we don't need it yet.\n      // If we need it later, it'll save a breaking change in hooks already in use.\n      var context = null;\n\n      l.runHook(m, 'signingUp', context, function () {\n        _web_api2.default.signUp(id, params, function (error, result, popupHandler) {\n          for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n            args[_key - 3] = arguments[_key];\n          }\n\n          if (error) {\n            errorHandler(error, popupHandler);\n          } else {\n            signUpSuccess.apply(undefined, [id, result, popupHandler].concat(args));\n          }\n        });\n      });\n    } catch (e) {\n      errorHandler(e);\n    }\n  });\n}\n\nfunction signUpSuccess(id, result, popupHandler) {\n  var lock = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  l.emitEvent(lock, 'signup success', result);\n\n  if ((0, _index4.shouldAutoLogin)(lock)) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return m.set('signedUp', true);\n    });\n\n    // TODO: check options, redirect is missing\n    var options = {\n      connection: (0, _index4.databaseConnectionName)(lock),\n      username: c.email(lock),\n      password: c.password(lock)\n    };\n\n    if (!!popupHandler) {\n      options.popupHandler = popupHandler;\n    }\n\n    return _web_api2.default.logIn(id, options, l.auth.params(lock).toJS(), function (error) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      if (error) {\n        setTimeout(function () {\n          return autoLogInError(id, error);\n        }, 250);\n      } else {\n        _actions.logInSuccess.apply(undefined, [id].concat(args));\n      }\n    });\n  }\n\n  var autoclose = l.ui.autoclose(lock);\n\n  if (!autoclose) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (lock) {\n      return l.setSubmitting(lock, false).set('signedUp', true);\n    });\n  } else {\n    (0, _actions.closeLock)(id, false);\n  }\n}\n\nfunction signUpError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  var invalidPasswordKeys = {\n    PasswordDictionaryError: 'password_dictionary_error',\n    PasswordNoUserInfoError: 'password_no_user_info_error',\n    PasswordStrengthError: 'password_strength_error'\n  };\n\n  l.emitEvent(m, 'signup error', error);\n\n  var errorKey = error.code === 'invalid_password' && invalidPasswordKeys[error.name] || error.code;\n\n  var errorMessage = i18n.html(m, ['error', 'signUp', errorKey]) || i18n.html(m, ['error', 'signUp', 'lock.fallback']);\n\n  if (error.code === 'hook_error') {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, error.description || errorMessage);\n    return;\n  }\n\n  if (errorKey === 'invalid_captcha') {\n    errorMessage = i18n.html(m, ['error', 'login', errorKey]);\n    return (0, _captcha.swapCaptcha)(id, true, function () {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n    });\n  }\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction autoLogInError(id, error) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    var errorMessage = l.loginErrorMessage(m, error);\n    if ((0, _index4.hasScreen)(m, 'login')) {\n      return l.setSubmitting((0, _index4.setScreen)(m, 'login'), false, errorMessage);\n    } else {\n      return l.setSubmitting(m, false, errorMessage);\n    }\n  });\n}\n\nfunction resetPassword(id) {\n  (0, _actions.validateAndSubmit)(id, ['email'], function (m) {\n    var params = {\n      connection: (0, _index4.databaseConnectionName)(m),\n      email: c.getFieldValue(m, 'email')\n    };\n\n    _web_api2.default.resetPassword(id, params, function (error) {\n      if (error) {\n        setTimeout(function () {\n          return resetPasswordError(id, error);\n        }, 250);\n      } else {\n        resetPasswordSuccess(id);\n      }\n    });\n  });\n}\n\nfunction resetPasswordSuccess(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  if ((0, _index4.hasScreen)(m, 'login')) {\n    (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n      return (0, _index4.setScreen)(l.setSubmitting(m, false), 'login', ['']);\n    } // array with one empty string tells the function to not clear any field\n    );\n\n    // TODO: should be handled by box\n    setTimeout(function () {\n      var successMessage = i18n.html(m, ['success', 'forgotPassword']);\n      (0, _index.swap)(_index.updateEntity, 'lock', id, l.setGlobalSuccess, successMessage);\n    }, 500);\n  } else {\n    if (l.ui.autoclose(m)) {\n      (0, _actions.closeLock)(id);\n    } else {\n      (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n        return l.setSubmitting(m, false).set('passwordResetted', true);\n      });\n    }\n  }\n}\n\nfunction resetPasswordError(id, error) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  var errorMessage = i18n.html(m, ['error', 'forgotPassword', error.code]) || i18n.html(m, ['error', 'forgotPassword', 'lock.fallback']);\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, l.setSubmitting, false, errorMessage);\n}\n\nfunction showLoginActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'login', fields);\n}\n\nfunction showSignUpActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'signUp', fields);\n}\n\nfunction showResetPasswordActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['password'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'forgotPassword', fields);\n}\n\nfunction cancelResetPassword(id) {\n  return showLoginActivity(id);\n}\n\nfunction cancelMFALogin(id) {\n  return showLoginActivity(id);\n}\n\nfunction toggleTermsAcceptance(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.toggleTermsAcceptance);\n}\n\nfunction showLoginMFAActivity(id) {\n  var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['mfa_code'];\n\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _index4.setScreen, 'mfaLogin', fields);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}