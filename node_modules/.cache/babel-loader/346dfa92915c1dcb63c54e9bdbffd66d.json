{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.initDatabase = initDatabase;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.signUpLink = signUpLink;\nexports.setScreen = setScreen;\nexports.getScreen = getScreen;\nexports.availableScreens = availableScreens;\nexports.getInitialScreen = getInitialScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.authWithUsername = authWithUsername;\nexports.hasScreen = hasScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _index = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../../field/index');\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _sync = require('../../sync');\n\nvar _sync2 = _interopRequireDefault(_sync);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _tenant = require('../../core/tenant');\n\nvar _enterprise = require('../../connection/enterprise');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n    get = _dataFns.get,\n    initNS = _dataFns.initNS,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset;\n\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable2.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\n\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a booelan.');\n  return valid;\n}\n\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not one of the following allowed values: ' + a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', ') + '.');\n  return valid;\n}\n\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim2.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a non-empty string.');\n  return valid;\n}\n\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not an array.');\n  return valid;\n}\n\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n      defaultDatabaseConnection = opts.defaultDatabaseConnection,\n      forgotPasswordLink = opts.forgotPasswordLink,\n      loginAfterSignUp = opts.loginAfterSignUp,\n      mustAcceptTerms = opts.mustAcceptTerms,\n      showTerms = opts.showTerms,\n      signUpLink = opts.signUpLink,\n      usernameStyle = opts.usernameStyle,\n      signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n      signUpHideUsernameField = opts.signUpHideUsernameField;\n\n  var _processScreenOptions = processScreenOptions(opts),\n      initialScreen = _processScreenOptions.initialScreen,\n      screens = _processScreenOptions.screens;\n\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n          name = x.name,\n          options = x.options,\n          placeholder = x.placeholder,\n          placeholderHTML = x.placeholderHTML,\n          prefill = x.prefill,\n          type = x.type,\n          validator = x.validator,\n          value = x.value,\n          storage = x.storage;\n      var filter = true;\n      var reservedNames = ['email', 'username', 'password'];\n\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: ' + reservedNames.join(', ') + '.');\n        filter = false;\n      }\n\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.');\n        filter = false;\n      }\n\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, 'When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \"' + types.join('\", \"') + '\".');\n        type = undefined;\n      }\n\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"select\" `type` but does not specify an `options` property that is an Array or a function.');\n        filter = false;\n      }\n\n      if (type === 'hidden' && !value) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"hidden\" `type` but does not specify a `value` string.');\n        filter = false;\n      }\n\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n    additionalSignUpFields = _immutable2.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  } // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n\n\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\n\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n      allowLogin = opts.allowLogin,\n      allowSignUp = opts.allowSignUp,\n      initialScreen = opts.initialScreen;\n  var screens = [];\n\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n\n  screens.push('mfaLogin');\n\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n\n  return {\n    initialScreen: initialScreen,\n    screens: new _immutable.List(screens)\n  };\n}\n\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n    allowLogin: availableScreens(m).contains('login'),\n    allowSignUp: availableScreens(m).contains('signUp'),\n    allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n    initialScreen: get(m, 'initialScreen')\n  }),\n      initialScreen = _processScreenOptions2.initialScreen,\n      screens = _processScreenOptions2.screens;\n\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\n\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\n\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\n\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\n\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'forgotPasswordLink', notFound);\n}\n\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return get(m, 'signUpLink', notFound);\n}\n\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : []; // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n  return tset(m, 'screen', name);\n}\n\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\n\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\n\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\n\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\n\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\n\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\n\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\n\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var isEmailOnly = databaseLogInWithEmail(m);\n\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\n\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\n\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n      allowForgot = _toJS.allowForgot,\n      allowSignup = _toJS.allowSignup;\n\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\n\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\n\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\n\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\n\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\n\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\n\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\n\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\n\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\n\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\n\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\n\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n\n  if (resolvedOptions === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}","map":{"version":3,"names":["exports","__esModule","initDatabase","overrideDatabaseOptions","defaultDatabaseConnection","defaultDatabaseConnectionName","databaseConnection","databaseConnectionName","forgotPasswordLink","signUpLink","setScreen","getScreen","availableScreens","getInitialScreen","hasInitialScreen","databaseConnectionRequiresUsername","databaseUsernameStyle","databaseLogInWithEmail","databaseUsernameValue","authWithUsername","hasScreen","shouldAutoLogin","passwordStrengthPolicy","additionalSignUpFields","showTerms","signUpFieldsStrictValidation","signUpHideUsernameField","mustAcceptTerms","termsAccepted","toggleTermsAcceptance","resolveAdditionalSignUpFields","_immutable","require","_immutable2","_interopRequireDefault","_index","l","_interopRequireWildcard","_index2","_data_utils","_sync","_sync2","_trim","_trim2","_tenant","_enterprise","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","_dataFns","dataFns","get","initNS","tget","tset","m","options","fromJS","processDatabaseOptions","assertMaybeBoolean","opts","name","valid","undefined","warn","assertMaybeEnum","a","indexOf","map","x","JSON","stringify","join","assertMaybeString","length","assertMaybeArray","window","Array","isArray","loginAfterSignUp","usernameStyle","_processScreenOptions","processScreenOptions","initialScreen","screens","reduce","r","icon","placeholder","placeholderHTML","prefill","type","validator","value","storage","filter","reservedNames","match","types","concat","y","Map","defaultConnectionName","toJS","defaults","arguments","allowLogin","allowSignUp","allowForgotPassword","push","List","_processScreenOptions2","contains","findConnection","resolvedConnection","defaultDirectory","connection","notFound","fields","clearGlobalError","clearGlobalSuccess","hideInvalidFields","clearFields","screen","str","requireUsername","hasSomeConnections","connectionResolver","findADConnectionWithoutDomain","isEmailOnly","getFieldValue","emailFirst","s","_toJS","allowForgot","allowSignup","resolveAdditionalSignUpSelectField","resolveAdditionalSignUpHiddenField","resolveAdditionalSignUpTextField","keyNs","resolvedPrefill","resolvedOptions","register","registerOptionField","recoverResult","successFn","result","syncFn","cb","setField"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/connection/database/index.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.initDatabase = initDatabase;\nexports.overrideDatabaseOptions = overrideDatabaseOptions;\nexports.defaultDatabaseConnection = defaultDatabaseConnection;\nexports.defaultDatabaseConnectionName = defaultDatabaseConnectionName;\nexports.databaseConnection = databaseConnection;\nexports.databaseConnectionName = databaseConnectionName;\nexports.forgotPasswordLink = forgotPasswordLink;\nexports.signUpLink = signUpLink;\nexports.setScreen = setScreen;\nexports.getScreen = getScreen;\nexports.availableScreens = availableScreens;\nexports.getInitialScreen = getInitialScreen;\nexports.hasInitialScreen = hasInitialScreen;\nexports.databaseConnectionRequiresUsername = databaseConnectionRequiresUsername;\nexports.databaseUsernameStyle = databaseUsernameStyle;\nexports.databaseLogInWithEmail = databaseLogInWithEmail;\nexports.databaseUsernameValue = databaseUsernameValue;\nexports.authWithUsername = authWithUsername;\nexports.hasScreen = hasScreen;\nexports.shouldAutoLogin = shouldAutoLogin;\nexports.passwordStrengthPolicy = passwordStrengthPolicy;\nexports.additionalSignUpFields = additionalSignUpFields;\nexports.showTerms = showTerms;\nexports.signUpFieldsStrictValidation = signUpFieldsStrictValidation;\nexports.signUpHideUsernameField = signUpHideUsernameField;\nexports.mustAcceptTerms = mustAcceptTerms;\nexports.termsAccepted = termsAccepted;\nexports.toggleTermsAcceptance = toggleTermsAcceptance;\nexports.resolveAdditionalSignUpFields = resolveAdditionalSignUpFields;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _index = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nvar _index2 = require('../../field/index');\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _sync = require('../../sync');\n\nvar _sync2 = _interopRequireDefault(_sync);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _tenant = require('../../core/tenant');\n\nvar _enterprise = require('../../connection/enterprise');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['database']),\n    get = _dataFns.get,\n    initNS = _dataFns.initNS,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset;\n\nfunction initDatabase(m, options) {\n  m = initNS(m, _immutable2.default.fromJS(processDatabaseOptions(options)));\n  m = resolveAdditionalSignUpFields(m);\n  return m;\n}\n\nfunction assertMaybeBoolean(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'boolean';\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a booelan.');\n  return valid;\n}\n\nfunction assertMaybeEnum(opts, name, a) {\n  var valid = opts[name] === undefined || a.indexOf(opts[name]) > -1;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not one of the following allowed values: ' + a.map(function (x) {\n    return JSON.stringify(x);\n  }).join(', ') + '.');\n  return valid;\n}\n\nfunction assertMaybeString(opts, name) {\n  var valid = opts[name] === undefined || typeof opts[name] === 'string' && (0, _trim2.default)(opts[name]).length > 0;\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not a non-empty string.');\n  return valid;\n}\n\nfunction assertMaybeArray(opts, name) {\n  var valid = opts[name] === undefined || window.Array.isArray(opts[name]);\n  if (!valid) l.warn(opts, 'The `' + name + '` option will be ignored, because it is not an array.');\n  return valid;\n}\n\nfunction processDatabaseOptions(opts) {\n  var additionalSignUpFields = opts.additionalSignUpFields,\n      defaultDatabaseConnection = opts.defaultDatabaseConnection,\n      forgotPasswordLink = opts.forgotPasswordLink,\n      loginAfterSignUp = opts.loginAfterSignUp,\n      mustAcceptTerms = opts.mustAcceptTerms,\n      showTerms = opts.showTerms,\n      signUpLink = opts.signUpLink,\n      usernameStyle = opts.usernameStyle,\n      signUpFieldsStrictValidation = opts.signUpFieldsStrictValidation,\n      signUpHideUsernameField = opts.signUpHideUsernameField;\n\n  var _processScreenOptions = processScreenOptions(opts),\n      initialScreen = _processScreenOptions.initialScreen,\n      screens = _processScreenOptions.screens;\n\n  if (!assertMaybeEnum(opts, 'usernameStyle', ['email', 'username'])) {\n    usernameStyle = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'defaultDatabaseConnection')) {\n    defaultDatabaseConnection = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'forgotPasswordLink')) {\n    forgotPasswordLink = undefined;\n  }\n\n  if (!assertMaybeString(opts, 'signUpLink')) {\n    signUpLink = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'mustAcceptTerms')) {\n    mustAcceptTerms = undefined;\n  }\n\n  if (!assertMaybeBoolean(opts, 'showTerms')) {\n    showTerms = true;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpFieldsStrictValidation')) {\n    signUpFieldsStrictValidation = false;\n  }\n\n  if (!assertMaybeBoolean(opts, 'signUpHideUsernameField')) {\n    signUpHideUsernameField = false;\n  }\n\n  if (!assertMaybeArray(opts, 'additionalSignUpFields')) {\n    additionalSignUpFields = undefined;\n  } else if (additionalSignUpFields) {\n    additionalSignUpFields = additionalSignUpFields.reduce(function (r, x) {\n      var icon = x.icon,\n          name = x.name,\n          options = x.options,\n          placeholder = x.placeholder,\n          placeholderHTML = x.placeholderHTML,\n          prefill = x.prefill,\n          type = x.type,\n          validator = x.validator,\n          value = x.value,\n          storage = x.storage;\n\n      var filter = true;\n\n      var reservedNames = ['email', 'username', 'password'];\n      if (typeof name != 'string' || !name.match(/^[a-zA-Z0-9_]+$/) || reservedNames.indexOf(name) > -1) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` because it does not contain valid `name` property. Every element of `additionalSignUpFields` must be an object with a `name` property that is a non-empty string consisting of letters, numbers and underscores. The following names are reserved, and therefore, cannot be used: ' + reservedNames.join(', ') + '.');\n        filter = false;\n      }\n\n      if (type !== 'hidden' && (typeof placeholder != 'string' || !placeholder) && (typeof placeholderHTML != 'string' || !placeholderHTML)) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it does not contain a valid `placeholder` or `placeholderHTML` property. Every element of `additionalSignUpFields` must have a `placeholder` or `placeholderHTML` property that is a non-empty string.');\n        filter = false;\n      }\n\n      if (placeholderHTML && placeholder) {\n        l.warn(opts, 'When provided, the `placeholderHTML` property of an element of `additionalSignUpFields` will override the `placeholder` property of that element');\n      }\n\n      if (icon != undefined && (typeof icon != 'string' || !icon)) {\n        l.warn(opts, 'When provided, the `icon` property of an element of `additionalSignUpFields` must be a non-empty string.');\n        icon = undefined;\n      }\n\n      if (prefill != undefined && (typeof prefill != 'string' || !prefill) && typeof prefill != 'function') {\n        l.warn(opts, 'When provided, the `prefill` property of an element of `additionalSignUpFields` must be a non-empty string or a function.');\n        prefill = undefined;\n      }\n\n      var types = ['select', 'text', 'checkbox', 'hidden'];\n      if (type != undefined && (typeof type != 'string' || types.indexOf(type) === -1)) {\n        l.warn(opts, 'When provided, the `type` property of an element of `additionalSignUpFields` must be one of the following strings: \"' + types.join('\", \"') + '\".');\n        type = undefined;\n      }\n\n      if (validator != undefined && type === 'select') {\n        l.warn(opts, 'Elements of `additionalSignUpFields` with a \"select\" `type` cannot specify a `validator` function, all of its `options` are assumed to be valid.');\n        validator = undefined;\n      }\n\n      if (validator != undefined && typeof validator != 'function') {\n        l.warn(opts, 'When provided, the `validator` property of an element of `additionalSignUpFields` must be a function.');\n        validator = undefined;\n      }\n\n      if (options != undefined && type != 'select') {\n        l.warn(opts, 'The `options` property can only by provided for an element of `additionalSignUpFields` when its `type` equals to \"select\"');\n        options = undefined;\n      }\n\n      if (options != undefined && !window.Array.isArray(options) && typeof options != 'function' || type === 'select' && options === undefined) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"select\" `type` but does not specify an `options` property that is an Array or a function.');\n        filter = false;\n      }\n      if (type === 'hidden' && !value) {\n        l.warn(opts, 'Ignoring an element of `additionalSignUpFields` (' + name + ') because it has a \"hidden\" `type` but does not specify a `value` string.');\n        filter = false;\n      }\n\n      return filter ? r.concat([{\n        icon: icon,\n        name: name,\n        options: options,\n        placeholder: placeholder,\n        placeholderHTML: placeholderHTML,\n        prefill: prefill,\n        type: type,\n        validator: validator,\n        value: value,\n        storage: storage\n      }]) : r;\n    }, []);\n\n    additionalSignUpFields = _immutable2.default.fromJS(additionalSignUpFields).map(function (x) {\n      return x.filter(function (y) {\n        return y !== undefined;\n      });\n    });\n  }\n\n  // TODO: add a warning if it is not a boolean, leave it undefined,\n  // and change accessor fn.\n  loginAfterSignUp = loginAfterSignUp === false ? false : true;\n\n  return (0, _immutable.Map)({\n    additionalSignUpFields: additionalSignUpFields,\n    defaultConnectionName: defaultDatabaseConnection,\n    forgotPasswordLink: forgotPasswordLink,\n    initialScreen: initialScreen,\n    loginAfterSignUp: loginAfterSignUp,\n    mustAcceptTerms: mustAcceptTerms,\n    showTerms: showTerms,\n    screens: screens,\n    signUpLink: signUpLink,\n    usernameStyle: usernameStyle,\n    signUpFieldsStrictValidation: signUpFieldsStrictValidation,\n    signUpHideUsernameField: signUpHideUsernameField\n  }).filter(function (x) {\n    return typeof x !== 'undefined';\n  }).toJS();\n}\n\nfunction processScreenOptions(opts) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    allowLogin: true,\n    allowSignUp: true,\n    allowForgotPassword: true,\n    initialScreen: undefined\n  };\n  var allowForgotPassword = opts.allowForgotPassword,\n      allowLogin = opts.allowLogin,\n      allowSignUp = opts.allowSignUp,\n      initialScreen = opts.initialScreen;\n\n\n  var screens = [];\n\n  if (allowLogin === true || !assertMaybeBoolean(opts, 'allowLogin') && defaults.allowLogin || allowLogin === undefined && defaults.allowLogin) {\n    screens.push('login');\n  }\n\n  if (allowSignUp === true || !assertMaybeBoolean(opts, 'allowSignUp') && defaults.allowSignUp || allowSignUp === undefined && defaults.allowSignUp) {\n    screens.push('signUp');\n  }\n\n  if (allowForgotPassword === true || !assertMaybeBoolean(opts, 'allowForgotPassword') && defaults.allowForgotPassword || allowForgotPassword === undefined && defaults.allowForgotPassword) {\n    screens.push('forgotPassword');\n  }\n\n  screens.push('mfaLogin');\n\n  if (!assertMaybeEnum(opts, 'initialScreen', screens)) {\n    initialScreen = undefined;\n  }\n\n  if (initialScreen === undefined) {\n    initialScreen = defaults.initialScreen || screens[0];\n  }\n\n  return { initialScreen: initialScreen, screens: new _immutable.List(screens) };\n}\n\nfunction overrideDatabaseOptions(m, opts) {\n  var _processScreenOptions2 = processScreenOptions(opts, {\n    allowLogin: availableScreens(m).contains('login'),\n    allowSignUp: availableScreens(m).contains('signUp'),\n    allowForgotPassword: availableScreens(m).contains('forgotPassword'),\n    initialScreen: get(m, 'initialScreen')\n  }),\n      initialScreen = _processScreenOptions2.initialScreen,\n      screens = _processScreenOptions2.screens;\n\n  m = tset(m, 'initialScreen', initialScreen);\n  m = tset(m, 'screens', screens);\n  return m;\n}\n\nfunction defaultDatabaseConnection(m) {\n  var name = defaultDatabaseConnectionName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDatabaseConnectionName(m) {\n  return get(m, 'defaultConnectionName');\n}\n\nfunction databaseConnection(m) {\n  return l.resolvedConnection(m) || (0, _tenant.defaultDirectory)(m) || defaultDatabaseConnection(m) || l.connection(m, 'database');\n}\n\nfunction databaseConnectionName(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('name');\n}\n\nfunction forgotPasswordLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  return get(m, 'forgotPasswordLink', notFound);\n}\n\nfunction signUpLink(m) {\n  var notFound = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  return get(m, 'signUpLink', notFound);\n}\n\nfunction setScreen(m, name) {\n  var fields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  // TODO: the lock/index module should provide a way to clear\n  // everything that needs the be cleared when changing screens, other\n  // modules should not care.\n  m = l.clearGlobalError(m);\n  m = l.clearGlobalSuccess(m);\n  m = (0, _index2.hideInvalidFields)(m, fields);\n  m = (0, _index2.clearFields)(m, fields);\n\n  return tset(m, 'screen', name);\n}\n\nfunction getScreen(m) {\n  var screen = tget(m, 'screen');\n  var initialScreen = getInitialScreen(m);\n  var screens = [screen, initialScreen, 'login', 'signUp', 'forgotPassword', 'mfaLogin'];\n  var availableScreens = screens.filter(function (x) {\n    return hasScreen(m, x);\n  });\n  return availableScreens[0];\n}\n\nfunction availableScreens(m) {\n  return tget(m, 'screens') || get(m, 'screens', new _immutable.List());\n}\n\nfunction getInitialScreen(m) {\n  return tget(m, 'initialScreen') || get(m, 'initialScreen');\n}\n\nfunction hasInitialScreen(m, str) {\n  return getInitialScreen(m) === str;\n}\n\nfunction databaseConnectionRequiresUsername(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).toJS().requireUsername;\n}\n\nfunction databaseUsernameStyle(m) {\n  if (l.hasSomeConnections(m, 'database')) {\n    if (l.connectionResolver(m)) {\n      return 'username';\n    }\n\n    return databaseConnectionRequiresUsername(m) ? get(m, 'usernameStyle', 'any') : 'email';\n  }\n\n  return l.hasSomeConnections(m, 'enterprise') && (0, _enterprise.findADConnectionWithoutDomain)(m) ? 'username' : 'email';\n}\n\nfunction databaseLogInWithEmail(m) {\n  return databaseUsernameStyle(m) === 'email';\n}\n\nfunction databaseUsernameValue(m) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var isEmailOnly = databaseLogInWithEmail(m);\n  if (isEmailOnly) {\n    return (0, _index2.getFieldValue)(m, 'email');\n  }\n  if (options.emailFirst) {\n    return (0, _index2.getFieldValue)(m, 'email') || (0, _index2.getFieldValue)(m, 'username');\n  }\n  return (0, _index2.getFieldValue)(m, 'username') || (0, _index2.getFieldValue)(m, 'email');\n}\n\nfunction authWithUsername(m) {\n  return databaseConnectionRequiresUsername(m) || get(m, 'usernameStyle', 'email') === 'username';\n}\n\nfunction hasScreen(m, s) {\n  var _toJS = (databaseConnection(m) || (0, _immutable.Map)()).toJS(),\n      allowForgot = _toJS.allowForgot,\n      allowSignup = _toJS.allowSignup;\n\n  return !(allowForgot === false && s === 'forgotPassword') && !(allowSignup === false && s === 'signUp') && availableScreens(m).contains(s);\n}\n\nfunction shouldAutoLogin(m) {\n  return get(m, 'loginAfterSignUp');\n}\n\nfunction passwordStrengthPolicy(m) {\n  return (databaseConnection(m) || (0, _immutable.Map)()).get('passwordPolicy', 'none');\n}\n\nfunction additionalSignUpFields(m) {\n  return get(m, 'additionalSignUpFields', (0, _immutable.List)());\n}\n\nfunction showTerms(m) {\n  return get(m, 'showTerms', true);\n}\n\nfunction signUpFieldsStrictValidation(m) {\n  return get(m, 'signUpFieldsStrictValidation', false);\n}\n\nfunction signUpHideUsernameField(m) {\n  return get(m, 'signUpHideUsernameField', false);\n}\n\nfunction mustAcceptTerms(m) {\n  return get(m, 'mustAcceptTerms', false);\n}\n\nfunction termsAccepted(m) {\n  return !mustAcceptTerms(m) || tget(m, 'termsAccepted', false);\n}\n\nfunction toggleTermsAcceptance(m) {\n  return tset(m, 'termsAccepted', !termsAccepted(m));\n}\n\nfunction resolveAdditionalSignUpFields(m) {\n  return additionalSignUpFields(m).reduce(function (r, x) {\n    switch (x.get('type')) {\n      case 'select':\n        return resolveAdditionalSignUpSelectField(r, x);\n      case 'hidden':\n        return resolveAdditionalSignUpHiddenField(r, x);\n      default:\n        return resolveAdditionalSignUpTextField(r, x);\n    }\n  }, m);\n}\n\nfunction resolveAdditionalSignUpSelectField(m, x) {\n  var name = x.get('name');\n  var keyNs = ['additionalSignUpField', name];\n  var prefill = x.get('prefill');\n  var options = x.get('options');\n\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n  var resolvedOptions = typeof options === 'function' ? undefined : options;\n\n  var register = function register(m) {\n    return resolvedPrefill !== undefined && resolvedOptions !== undefined ? (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill) : m;\n  };\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('prefill'), {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        resolvedPrefill = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  }\n\n  if (resolvedOptions === undefined) {\n    m = (0, _sync2.default)(m, keyNs.concat('options'), {\n      successFn: function successFn(m, result) {\n        resolvedOptions = result;\n        return register(m);\n      },\n      syncFn: function syncFn(m, cb) {\n        return options(cb);\n      }\n    });\n  }\n\n  if (resolvedPrefill !== undefined && resolvedOptions !== undefined) {\n    m = (0, _index2.registerOptionField)(m, name, _immutable2.default.fromJS(resolvedOptions), resolvedPrefill);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpTextField(m, x) {\n  var name = x.get('name');\n  var key = ['additionalSignUpField', name, 'prefill'];\n  var prefill = x.get('prefill');\n  var validator = x.get('validator');\n\n  var resolvedPrefill = typeof prefill === 'function' ? undefined : prefill || '';\n\n  if (resolvedPrefill === undefined) {\n    m = (0, _sync2.default)(m, key, {\n      recoverResult: '',\n      successFn: function successFn(m, result) {\n        return (0, _index2.setField)(m, name, result, validator);\n      },\n      syncFn: function syncFn(m, cb) {\n        return prefill(cb);\n      }\n    });\n  } else {\n    m = (0, _index2.setField)(m, name, resolvedPrefill, validator);\n  }\n\n  return m;\n}\n\nfunction resolveAdditionalSignUpHiddenField(m, x) {\n  return (0, _index2.setField)(m, x.get('name'), x.get('value'));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}