{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n}; // TODO: enterprise connections should not depend on database\n// connections. However, we now allow a username input to contain also\n// an email and this information is in the database module. We should\n// make this information flow from the UI (like we do for the startHRD\n// function). Including this dependency here allows us to do that\n// incrementally.\n\n\nexports.startHRD = startHRD;\nexports.cancelHRD = cancelHRD;\nexports.logIn = logIn;\n\nvar _index = require('../../store/index');\n\nvar _enterprise = require('../enterprise');\n\nvar _index2 = require('../../field/index');\n\nvar _email = require('../../field/email');\n\nvar _actions = require('../../core/actions');\n\nvar _index3 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index3);\n\nvar _captcha = require('../captcha');\n\nvar _index4 = require('../database/index');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction startHRD(id, email) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _enterprise.toggleHRD, email);\n}\n\nfunction cancelHRD(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    m = (0, _enterprise.toggleHRD)(m, false);\n    m = (0, _index2.hideInvalidFields)(m);\n    return m;\n  });\n}\n\nfunction getConnectionScopesFrom(m, connection) {\n  var connectionScopes = l.auth.connectionScopes(m);\n  return connectionScopes.get(connection.get('name'));\n}\n\nfunction logIn(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var email = (0, _index2.getFieldValue)(m, (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username');\n  var ssoConnection = (0, _enterprise.matchConnection)(m, email);\n  var enterpriseConnection = (0, _enterprise.enterpriseActiveFlowConnection)(m);\n  var connectionScopes = getConnectionScopesFrom(m, ssoConnection || enterpriseConnection);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var fields = [usernameField, 'password'];\n  var params = {\n    connection_scope: connectionScopes ? connectionScopes.toJS() : undefined\n  };\n\n  if (ssoConnection && !(0, _enterprise.isHRDActive)(m)) {\n    return logInSSO(id, ssoConnection, params);\n  }\n\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n\n  if (!isCaptchaValid && !ssoConnection) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n\n  logInActiveFlow(id, params);\n}\n\nfunction logInActiveFlow(id, params) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _enterprise.isHRDActive)(m) || !(0, _index4.databaseLogInWithEmail)(m) ? 'username' : 'email';\n  var originalUsername = (0, _index2.getFieldValue)(m, usernameField);\n  var connection = (0, _enterprise.enterpriseActiveFlowConnection)(m);\n  var username = l.defaultADUsernameFromEmailPrefix(m) ? (0, _email.emailLocalPart)(originalUsername) : originalUsername;\n  (0, _actions.logIn)(id, ['password', usernameField], _extends({}, params, {\n    connection: connection ? connection.get('name') : null,\n    username: username,\n    password: (0, _index2.getFieldValue)(m, 'password'),\n    login_hint: username\n  }), function (id, error, fields, next) {\n    var wasCaptchaInvalid = error && error.code === 'invalid captcha';\n    (0, _captcha.swapCaptcha)(id, wasCaptchaInvalid, next);\n  });\n}\n\nfunction logInSSO(id, connection, params) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var field = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  l.emitEvent(m, 'sso login', {\n    lockID: id,\n    connection: connection,\n    field: field\n  });\n  (0, _actions.logIn)(id, [field], _extends({}, params, {\n    connection: connection.get('name'),\n    login_hint: (0, _index2.getFieldValue)(m, field)\n  }));\n}","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","startHRD","cancelHRD","logIn","_index","require","_enterprise","_index2","_email","_actions","_index3","l","_interopRequireWildcard","_captcha","_index4","obj","newObj","default","id","email","swap","updateEntity","toggleHRD","m","hideInvalidFields","getConnectionScopesFrom","connection","connectionScopes","auth","get","read","getEntity","getFieldValue","databaseLogInWithEmail","ssoConnection","matchConnection","enterpriseConnection","enterpriseActiveFlowConnection","usernameField","fields","params","connection_scope","toJS","undefined","isHRDActive","logInSSO","isCaptchaValid","setCaptchaParams","showMissingCaptcha","logInActiveFlow","originalUsername","username","defaultADUsernameFromEmailPrefix","emailLocalPart","password","login_hint","error","next","wasCaptchaInvalid","code","swapCaptcha","field","emitEvent","lockID"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/connection/enterprise/actions.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n// TODO: enterprise connections should not depend on database\n// connections. However, we now allow a username input to contain also\n// an email and this information is in the database module. We should\n// make this information flow from the UI (like we do for the startHRD\n// function). Including this dependency here allows us to do that\n// incrementally.\n\n\nexports.startHRD = startHRD;\nexports.cancelHRD = cancelHRD;\nexports.logIn = logIn;\n\nvar _index = require('../../store/index');\n\nvar _enterprise = require('../enterprise');\n\nvar _index2 = require('../../field/index');\n\nvar _email = require('../../field/email');\n\nvar _actions = require('../../core/actions');\n\nvar _index3 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index3);\n\nvar _captcha = require('../captcha');\n\nvar _index4 = require('../database/index');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction startHRD(id, email) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _enterprise.toggleHRD, email);\n}\n\nfunction cancelHRD(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, function (m) {\n    m = (0, _enterprise.toggleHRD)(m, false);\n    m = (0, _index2.hideInvalidFields)(m);\n    return m;\n  });\n}\n\nfunction getConnectionScopesFrom(m, connection) {\n  var connectionScopes = l.auth.connectionScopes(m);\n  return connectionScopes.get(connection.get('name'));\n}\n\nfunction logIn(id) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var email = (0, _index2.getFieldValue)(m, (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username');\n  var ssoConnection = (0, _enterprise.matchConnection)(m, email);\n  var enterpriseConnection = (0, _enterprise.enterpriseActiveFlowConnection)(m);\n  var connectionScopes = getConnectionScopesFrom(m, ssoConnection || enterpriseConnection);\n  var usernameField = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n  var fields = [usernameField, 'password'];\n\n  var params = {\n    connection_scope: connectionScopes ? connectionScopes.toJS() : undefined\n  };\n\n  if (ssoConnection && !(0, _enterprise.isHRDActive)(m)) {\n    return logInSSO(id, ssoConnection, params);\n  }\n\n  var isCaptchaValid = (0, _captcha.setCaptchaParams)(m, params, fields);\n\n  if (!isCaptchaValid && !ssoConnection) {\n    return (0, _captcha.showMissingCaptcha)(m, id);\n  }\n\n  logInActiveFlow(id, params);\n}\n\nfunction logInActiveFlow(id, params) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var usernameField = (0, _enterprise.isHRDActive)(m) || !(0, _index4.databaseLogInWithEmail)(m) ? 'username' : 'email';\n\n  var originalUsername = (0, _index2.getFieldValue)(m, usernameField);\n  var connection = (0, _enterprise.enterpriseActiveFlowConnection)(m);\n\n  var username = l.defaultADUsernameFromEmailPrefix(m) ? (0, _email.emailLocalPart)(originalUsername) : originalUsername;\n\n  (0, _actions.logIn)(id, ['password', usernameField], _extends({}, params, {\n    connection: connection ? connection.get('name') : null,\n    username: username,\n    password: (0, _index2.getFieldValue)(m, 'password'),\n    login_hint: username\n  }), function (id, error, fields, next) {\n    var wasCaptchaInvalid = error && error.code === 'invalid captcha';\n    (0, _captcha.swapCaptcha)(id, wasCaptchaInvalid, next);\n  });\n}\n\nfunction logInSSO(id, connection, params) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var field = (0, _index4.databaseLogInWithEmail)(m) ? 'email' : 'username';\n\n  l.emitEvent(m, 'sso login', {\n    lockID: id,\n    connection: connection,\n    field: field\n  });\n\n  (0, _actions.logIn)(id, [field], _extends({}, params, {\n    connection: connection.get('name'),\n    login_hint: (0, _index2.getFieldValue)(m, field)\n  }));\n}\n"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;IAAE,IAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;IAA2B,KAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;MAAE,IAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;QAAEL,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;MAA4B;IAAE;EAAE;;EAAC,OAAOL,MAAP;AAAgB,CAAhQ,C,CAEA;AACA;AACA;AACA;AACA;AACA;;;AAGAL,OAAO,CAACc,QAAR,GAAmBA,QAAnB;AACAd,OAAO,CAACe,SAAR,GAAoBA,SAApB;AACAf,OAAO,CAACgB,KAAR,GAAgBA,KAAhB;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,mBAAD,CAApB;;AAEA,IAAIC,WAAW,GAAGD,OAAO,CAAC,eAAD,CAAzB;;AAEA,IAAIE,OAAO,GAAGF,OAAO,CAAC,mBAAD,CAArB;;AAEA,IAAIG,MAAM,GAAGH,OAAO,CAAC,mBAAD,CAApB;;AAEA,IAAII,QAAQ,GAAGJ,OAAO,CAAC,oBAAD,CAAtB;;AAEA,IAAIK,OAAO,GAAGL,OAAO,CAAC,kBAAD,CAArB;;AAEA,IAAIM,CAAC,GAAGC,uBAAuB,CAACF,OAAD,CAA/B;;AAEA,IAAIG,QAAQ,GAAGR,OAAO,CAAC,YAAD,CAAtB;;AAEA,IAAIS,OAAO,GAAGT,OAAO,CAAC,mBAAD,CAArB;;AAEA,SAASO,uBAAT,CAAiCG,GAAjC,EAAsC;EAAE,IAAIA,GAAG,IAAIA,GAAG,CAAC3B,UAAf,EAA2B;IAAE,OAAO2B,GAAP;EAAa,CAA1C,MAAgD;IAAE,IAAIC,MAAM,GAAG,EAAb;;IAAiB,IAAID,GAAG,IAAI,IAAX,EAAiB;MAAE,KAAK,IAAIlB,GAAT,IAAgBkB,GAAhB,EAAqB;QAAE,IAAIzB,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCe,GAArC,EAA0ClB,GAA1C,CAAJ,EAAoDmB,MAAM,CAACnB,GAAD,CAAN,GAAckB,GAAG,CAAClB,GAAD,CAAjB;MAAyB;IAAE;;IAACmB,MAAM,CAACC,OAAP,GAAiBF,GAAjB;IAAsB,OAAOC,MAAP;EAAgB;AAAE;;AAE7Q,SAASf,QAAT,CAAkBiB,EAAlB,EAAsBC,KAAtB,EAA6B;EAC3B,CAAC,GAAGf,MAAM,CAACgB,IAAX,EAAiBhB,MAAM,CAACiB,YAAxB,EAAsC,MAAtC,EAA8CH,EAA9C,EAAkDZ,WAAW,CAACgB,SAA9D,EAAyEH,KAAzE;AACD;;AAED,SAASjB,SAAT,CAAmBgB,EAAnB,EAAuB;EACrB,CAAC,GAAGd,MAAM,CAACgB,IAAX,EAAiBhB,MAAM,CAACiB,YAAxB,EAAsC,MAAtC,EAA8CH,EAA9C,EAAkD,UAAUK,CAAV,EAAa;IAC7DA,CAAC,GAAG,CAAC,GAAGjB,WAAW,CAACgB,SAAhB,EAA2BC,CAA3B,EAA8B,KAA9B,CAAJ;IACAA,CAAC,GAAG,CAAC,GAAGhB,OAAO,CAACiB,iBAAZ,EAA+BD,CAA/B,CAAJ;IACA,OAAOA,CAAP;EACD,CAJD;AAKD;;AAED,SAASE,uBAAT,CAAiCF,CAAjC,EAAoCG,UAApC,EAAgD;EAC9C,IAAIC,gBAAgB,GAAGhB,CAAC,CAACiB,IAAF,CAAOD,gBAAP,CAAwBJ,CAAxB,CAAvB;EACA,OAAOI,gBAAgB,CAACE,GAAjB,CAAqBH,UAAU,CAACG,GAAX,CAAe,MAAf,CAArB,CAAP;AACD;;AAED,SAAS1B,KAAT,CAAee,EAAf,EAAmB;EACjB,IAAIK,CAAC,GAAG,CAAC,GAAGnB,MAAM,CAAC0B,IAAX,EAAiB1B,MAAM,CAAC2B,SAAxB,EAAmC,MAAnC,EAA2Cb,EAA3C,CAAR;EACA,IAAIC,KAAK,GAAG,CAAC,GAAGZ,OAAO,CAACyB,aAAZ,EAA2BT,CAA3B,EAA8B,CAAC,GAAGT,OAAO,CAACmB,sBAAZ,EAAoCV,CAApC,IAAyC,OAAzC,GAAmD,UAAjF,CAAZ;EACA,IAAIW,aAAa,GAAG,CAAC,GAAG5B,WAAW,CAAC6B,eAAhB,EAAiCZ,CAAjC,EAAoCJ,KAApC,CAApB;EACA,IAAIiB,oBAAoB,GAAG,CAAC,GAAG9B,WAAW,CAAC+B,8BAAhB,EAAgDd,CAAhD,CAA3B;EACA,IAAII,gBAAgB,GAAGF,uBAAuB,CAACF,CAAD,EAAIW,aAAa,IAAIE,oBAArB,CAA9C;EACA,IAAIE,aAAa,GAAG,CAAC,GAAGxB,OAAO,CAACmB,sBAAZ,EAAoCV,CAApC,IAAyC,OAAzC,GAAmD,UAAvE;EACA,IAAIgB,MAAM,GAAG,CAACD,aAAD,EAAgB,UAAhB,CAAb;EAEA,IAAIE,MAAM,GAAG;IACXC,gBAAgB,EAAEd,gBAAgB,GAAGA,gBAAgB,CAACe,IAAjB,EAAH,GAA6BC;EADpD,CAAb;;EAIA,IAAIT,aAAa,IAAI,CAAC,CAAC,GAAG5B,WAAW,CAACsC,WAAhB,EAA6BrB,CAA7B,CAAtB,EAAuD;IACrD,OAAOsB,QAAQ,CAAC3B,EAAD,EAAKgB,aAAL,EAAoBM,MAApB,CAAf;EACD;;EAED,IAAIM,cAAc,GAAG,CAAC,GAAGjC,QAAQ,CAACkC,gBAAb,EAA+BxB,CAA/B,EAAkCiB,MAAlC,EAA0CD,MAA1C,CAArB;;EAEA,IAAI,CAACO,cAAD,IAAmB,CAACZ,aAAxB,EAAuC;IACrC,OAAO,CAAC,GAAGrB,QAAQ,CAACmC,kBAAb,EAAiCzB,CAAjC,EAAoCL,EAApC,CAAP;EACD;;EAED+B,eAAe,CAAC/B,EAAD,EAAKsB,MAAL,CAAf;AACD;;AAED,SAASS,eAAT,CAAyB/B,EAAzB,EAA6BsB,MAA7B,EAAqC;EACnC,IAAIjB,CAAC,GAAG,CAAC,GAAGnB,MAAM,CAAC0B,IAAX,EAAiB1B,MAAM,CAAC2B,SAAxB,EAAmC,MAAnC,EAA2Cb,EAA3C,CAAR;EACA,IAAIoB,aAAa,GAAG,CAAC,GAAGhC,WAAW,CAACsC,WAAhB,EAA6BrB,CAA7B,KAAmC,CAAC,CAAC,GAAGT,OAAO,CAACmB,sBAAZ,EAAoCV,CAApC,CAApC,GAA6E,UAA7E,GAA0F,OAA9G;EAEA,IAAI2B,gBAAgB,GAAG,CAAC,GAAG3C,OAAO,CAACyB,aAAZ,EAA2BT,CAA3B,EAA8Be,aAA9B,CAAvB;EACA,IAAIZ,UAAU,GAAG,CAAC,GAAGpB,WAAW,CAAC+B,8BAAhB,EAAgDd,CAAhD,CAAjB;EAEA,IAAI4B,QAAQ,GAAGxC,CAAC,CAACyC,gCAAF,CAAmC7B,CAAnC,IAAwC,CAAC,GAAGf,MAAM,CAAC6C,cAAX,EAA2BH,gBAA3B,CAAxC,GAAuFA,gBAAtG;EAEA,CAAC,GAAGzC,QAAQ,CAACN,KAAb,EAAoBe,EAApB,EAAwB,CAAC,UAAD,EAAaoB,aAAb,CAAxB,EAAqDjD,QAAQ,CAAC,EAAD,EAAKmD,MAAL,EAAa;IACxEd,UAAU,EAAEA,UAAU,GAAGA,UAAU,CAACG,GAAX,CAAe,MAAf,CAAH,GAA4B,IADsB;IAExEsB,QAAQ,EAAEA,QAF8D;IAGxEG,QAAQ,EAAE,CAAC,GAAG/C,OAAO,CAACyB,aAAZ,EAA2BT,CAA3B,EAA8B,UAA9B,CAH8D;IAIxEgC,UAAU,EAAEJ;EAJ4D,CAAb,CAA7D,EAKI,UAAUjC,EAAV,EAAcsC,KAAd,EAAqBjB,MAArB,EAA6BkB,IAA7B,EAAmC;IACrC,IAAIC,iBAAiB,GAAGF,KAAK,IAAIA,KAAK,CAACG,IAAN,KAAe,iBAAhD;IACA,CAAC,GAAG9C,QAAQ,CAAC+C,WAAb,EAA0B1C,EAA1B,EAA8BwC,iBAA9B,EAAiDD,IAAjD;EACD,CARD;AASD;;AAED,SAASZ,QAAT,CAAkB3B,EAAlB,EAAsBQ,UAAtB,EAAkCc,MAAlC,EAA0C;EACxC,IAAIjB,CAAC,GAAG,CAAC,GAAGnB,MAAM,CAAC0B,IAAX,EAAiB1B,MAAM,CAAC2B,SAAxB,EAAmC,MAAnC,EAA2Cb,EAA3C,CAAR;EACA,IAAI2C,KAAK,GAAG,CAAC,GAAG/C,OAAO,CAACmB,sBAAZ,EAAoCV,CAApC,IAAyC,OAAzC,GAAmD,UAA/D;EAEAZ,CAAC,CAACmD,SAAF,CAAYvC,CAAZ,EAAe,WAAf,EAA4B;IAC1BwC,MAAM,EAAE7C,EADkB;IAE1BQ,UAAU,EAAEA,UAFc;IAG1BmC,KAAK,EAAEA;EAHmB,CAA5B;EAMA,CAAC,GAAGpD,QAAQ,CAACN,KAAb,EAAoBe,EAApB,EAAwB,CAAC2C,KAAD,CAAxB,EAAiCxE,QAAQ,CAAC,EAAD,EAAKmD,MAAL,EAAa;IACpDd,UAAU,EAAEA,UAAU,CAACG,GAAX,CAAe,MAAf,CADwC;IAEpD0B,UAAU,EAAE,CAAC,GAAGhD,OAAO,CAACyB,aAAZ,EAA2BT,CAA3B,EAA8BsC,KAA9B;EAFwC,CAAb,CAAzC;AAID"},"metadata":{},"sourceType":"script"}