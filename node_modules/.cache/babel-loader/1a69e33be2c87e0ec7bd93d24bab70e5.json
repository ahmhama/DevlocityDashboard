{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.initTenant = initTenant;\nexports.tenantConnections = tenantConnections;\nexports.defaultDirectory = defaultDirectory;\nexports.defaultDirectoryName = defaultDirectoryName;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _auth0PasswordPolicies = require('auth0-password-policies');\n\nvar _auth0PasswordPolicies2 = _interopRequireDefault(_auth0PasswordPolicies);\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _index = require('../index');\n\nvar l = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _dataFns = (0, _data_utils.dataFns)(['client']),\n    initNS = _dataFns.initNS,\n    get = _dataFns.get;\n\nvar DEFAULT_CONNECTION_VALIDATION = {\n  username: {\n    min: 1,\n    max: 15\n  }\n};\n\nfunction formatConnectionValidation() {\n  var connectionValidation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (connectionValidation.username == null) {\n    return null;\n  }\n\n  var validation = _extends({}, DEFAULT_CONNECTION_VALIDATION, connectionValidation);\n\n  var defaultMin = DEFAULT_CONNECTION_VALIDATION.username.min;\n  var defaultMax = DEFAULT_CONNECTION_VALIDATION.username.max;\n  validation.username.min = parseInt(validation.username.min, 10) || defaultMin;\n  validation.username.max = parseInt(validation.username.max, 10) || defaultMax;\n\n  if (validation.username.min > validation.username.max) {\n    validation.username.min = defaultMin;\n    validation.username.max = defaultMax;\n  }\n\n  return validation;\n}\n\nvar emptyConnections = _immutable2.default.fromJS({\n  database: [],\n  enterprise: [],\n  passwordless: [],\n  social: [],\n  unknown: [] // TODO: should be oauth2\n\n});\n\nfunction initTenant(m, client_id, client) {\n  return initNS(m, formatTenant(client_id, client));\n}\n\nfunction formatTenant(client_id, o) {\n  return new _immutable2.default.fromJS({\n    connections: formatTenantConnections(client_id, o),\n    defaultDirectory: o.defaultDirectory || null\n  });\n}\n\nfunction formatTenantConnections(client_id, o) {\n  var result = emptyConnections.toJS();\n  var connectionTypes = Object.keys(o.connections).filter(function (name) {\n    return name != 'passwordless';\n  }); // disabled until lock supports passwordless connections within the same engine\n\n  var connections_filter = null;\n\n  if (o.clientsConnections && o.clientsConnections[client_id]) {\n    connections_filter = o.clientsConnections[client_id];\n  }\n\n  connectionTypes.forEach(function (connectionTypeName) {\n    var _result$connectionTyp;\n\n    var connections = o.connections[connectionTypeName].map(function (connection) {\n      return formatTenantConnection(connectionTypeName, connection);\n    }).filter(function (connection) {\n      return connections_filter === null || connections_filter.includes(connection.name);\n    });\n\n    (_result$connectionTyp = result[connectionTypeName]).push.apply(_result$connectionTyp, connections);\n  });\n  return result;\n}\n\nfunction formatTenantConnection(connectionType, connection) {\n  var result = {\n    name: connection.name,\n    strategy: connection.strategy,\n    type: connectionType\n  };\n\n  if (connectionType === 'database') {\n    if (connection.validation && connection.validation.passwordPolicy) {\n      result.passwordPolicy = connection.validation.passwordPolicy;\n    }\n\n    result.passwordPolicy = _auth0PasswordPolicies2.default[result.passwordPolicy || 'none'];\n    result.allowSignup = typeof connection.allowSignup === 'boolean' ? connection.allowSignup : true;\n    result.allowForgot = typeof connection.allowForgot === 'boolean' ? connection.allowForgot : true;\n    result.requireUsername = typeof connection.requiresUsername === 'boolean' ? connection.requiresUsername : false;\n    result.validation = formatConnectionValidation(connection.validation);\n  }\n\n  if (connectionType === 'enterprise') {\n    result.domains = connection.domains;\n  }\n\n  return result;\n}\n\nfunction tenantConnections(m) {\n  return get(m, 'connections', emptyConnections);\n}\n\nfunction defaultDirectory(m) {\n  var name = defaultDirectoryName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDirectoryName(m) {\n  return get(m, 'defaultDirectory', null);\n}","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","initTenant","tenantConnections","defaultDirectory","defaultDirectoryName","_immutable","require","_immutable2","_interopRequireDefault","_auth0PasswordPolicies","_auth0PasswordPolicies2","_data_utils","_index","l","_interopRequireWildcard","obj","newObj","default","_dataFns","dataFns","initNS","get","DEFAULT_CONNECTION_VALIDATION","username","min","max","formatConnectionValidation","connectionValidation","undefined","validation","defaultMin","defaultMax","parseInt","emptyConnections","fromJS","database","enterprise","passwordless","social","unknown","m","client_id","client","formatTenant","o","connections","formatTenantConnections","result","toJS","connectionTypes","keys","filter","name","connections_filter","clientsConnections","forEach","connectionTypeName","_result$connectionTyp","map","connection","formatTenantConnection","includes","push","apply","connectionType","strategy","type","passwordPolicy","allowSignup","allowForgot","requireUsername","requiresUsername","domains","findConnection"],"sources":["C:/Users/Lenovo/Desktop/New folder (2)/strikingDash/node_modules/auth0-lock/lib/core/tenant/index.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.initTenant = initTenant;\nexports.tenantConnections = tenantConnections;\nexports.defaultDirectory = defaultDirectory;\nexports.defaultDirectoryName = defaultDirectoryName;\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _auth0PasswordPolicies = require('auth0-password-policies');\n\nvar _auth0PasswordPolicies2 = _interopRequireDefault(_auth0PasswordPolicies);\n\nvar _data_utils = require('../../utils/data_utils');\n\nvar _index = require('../index');\n\nvar l = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['client']),\n    initNS = _dataFns.initNS,\n    get = _dataFns.get;\n\nvar DEFAULT_CONNECTION_VALIDATION = { username: { min: 1, max: 15 } };\n\nfunction formatConnectionValidation() {\n  var connectionValidation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (connectionValidation.username == null) {\n    return null;\n  }\n\n  var validation = _extends({}, DEFAULT_CONNECTION_VALIDATION, connectionValidation);\n  var defaultMin = DEFAULT_CONNECTION_VALIDATION.username.min;\n  var defaultMax = DEFAULT_CONNECTION_VALIDATION.username.max;\n\n  validation.username.min = parseInt(validation.username.min, 10) || defaultMin;\n  validation.username.max = parseInt(validation.username.max, 10) || defaultMax;\n\n  if (validation.username.min > validation.username.max) {\n    validation.username.min = defaultMin;\n    validation.username.max = defaultMax;\n  }\n\n  return validation;\n}\n\nvar emptyConnections = _immutable2.default.fromJS({\n  database: [],\n  enterprise: [],\n  passwordless: [],\n  social: [],\n  unknown: [] // TODO: should be oauth2\n});\n\nfunction initTenant(m, client_id, client) {\n  return initNS(m, formatTenant(client_id, client));\n}\n\nfunction formatTenant(client_id, o) {\n  return new _immutable2.default.fromJS({\n    connections: formatTenantConnections(client_id, o),\n    defaultDirectory: o.defaultDirectory || null\n  });\n}\n\nfunction formatTenantConnections(client_id, o) {\n  var result = emptyConnections.toJS();\n  var connectionTypes = Object.keys(o.connections).filter(function (name) {\n    return name != 'passwordless';\n  }); // disabled until lock supports passwordless connections within the same engine\n  var connections_filter = null;\n\n  if (o.clientsConnections && o.clientsConnections[client_id]) {\n    connections_filter = o.clientsConnections[client_id];\n  }\n\n  connectionTypes.forEach(function (connectionTypeName) {\n    var _result$connectionTyp;\n\n    var connections = o.connections[connectionTypeName].map(function (connection) {\n      return formatTenantConnection(connectionTypeName, connection);\n    }).filter(function (connection) {\n      return connections_filter === null || connections_filter.includes(connection.name);\n    });\n    (_result$connectionTyp = result[connectionTypeName]).push.apply(_result$connectionTyp, connections);\n  });\n\n  return result;\n}\n\nfunction formatTenantConnection(connectionType, connection) {\n  var result = {\n    name: connection.name,\n    strategy: connection.strategy,\n    type: connectionType\n  };\n\n  if (connectionType === 'database') {\n    if (connection.validation && connection.validation.passwordPolicy) {\n      result.passwordPolicy = connection.validation.passwordPolicy;\n    }\n\n    result.passwordPolicy = _auth0PasswordPolicies2.default[result.passwordPolicy || 'none'];\n\n    result.allowSignup = typeof connection.allowSignup === 'boolean' ? connection.allowSignup : true;\n\n    result.allowForgot = typeof connection.allowForgot === 'boolean' ? connection.allowForgot : true;\n\n    result.requireUsername = typeof connection.requiresUsername === 'boolean' ? connection.requiresUsername : false;\n\n    result.validation = formatConnectionValidation(connection.validation);\n  }\n\n  if (connectionType === 'enterprise') {\n    result.domains = connection.domains;\n  }\n\n  return result;\n}\n\nfunction tenantConnections(m) {\n  return get(m, 'connections', emptyConnections);\n}\n\nfunction defaultDirectory(m) {\n  var name = defaultDirectoryName(m);\n  return name && l.findConnection(m, name);\n}\n\nfunction defaultDirectoryName(m) {\n  return get(m, 'defaultDirectory', null);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}